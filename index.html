<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÉcoleNumériqueCI - Système de Gestion Scolaire</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #dbeafe;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1f2937;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            overflow-x: hidden;
        }
        
        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateX(-30px) scale(0.95);
            }
            to { 
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }
        
        @keyframes slideOut {
            from { 
                opacity: 1;
                transform: translateX(0) scale(1);
            }
            to { 
                opacity: 0;
                transform: translateX(30px) scale(0.95);
            }
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 5px rgba(37, 99, 235, 0.3); }
            50% { box-shadow: 0 0 20px rgba(37, 99, 235, 0.6); }
        }
        
        @keyframes typewriter {
            from { width: 0; }
            to { width: 100%; }
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; backdrop-filter: blur(0px); }
            to { opacity: 1; backdrop-filter: blur(5px); }
        }
        
        @keyframes modalSlideIn {
            from { transform: scale(0.8) translateY(20px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: var(--primary); }
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Styles globaux */
        .sidebar {
            background: linear-gradient(180deg, var(--dark) 0%, var(--primary-dark) 100%);
            color: white;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 0%, rgba(255,255,255,0.1) 100%);
            pointer-events: none;
        }
        
        .nav-item {
            transition: var(--transition);
            border-radius: 0.75rem;
            position: relative;
            overflow: hidden;
        }
        
        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.6s;
        }
        
        .nav-item:hover::before {
            left: 100%;
        }
        
        .nav-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(8px);
        }
        
        .nav-item.active {
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 25px -8px rgba(0, 0, 0, 0.3);
            animation: pulse-glow 2s infinite;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 1.25rem;
            box-shadow: 
                0 10px 25px -5px rgba(0, 0, 0, 0.1),
                0 5px 10px -5px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--success), var(--warning));
            background-size: 200% 100%;
            animation: shimmer 3s infinite linear;
        }
        
        .stat-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 
                0 25px 50px -12px rgba(0, 0, 0, 0.25),
                0 10px 20px -10px rgba(0, 0, 0, 0.1);
        }
        
        .floating {
            animation: float 6s ease-in-out infinite;
        }
        
        .progress-bar {
            background: rgba(229, 231, 235, 0.6);
            border-radius: 1rem;
            overflow: hidden;
            height: 10px;
            backdrop-filter: blur(10px);
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 1rem;
            transition: width 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            background: linear-gradient(90deg, var(--primary), var(--success));
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.875rem 1.75rem;
            border-radius: 0.875rem;
            font-weight: 600;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            text-decoration: none;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid #d1d5db;
            color: #374151;
            backdrop-filter: blur(10px);
        }
        
        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.8);
            border-color: var(--primary);
            color: var(--primary);
            transform: translateY(-2px);
        }
        
        .input {
            width: 100%;
            padding: 0.875rem 1.25rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.875rem;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
        }
        
        .input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
            transform: translateY(-2px);
            background: white;
        }
        
        .table-container {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 1.25rem;
            overflow: hidden;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .table th {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            font-weight: 700;
            color: #374151;
            border-bottom: 2px solid #e5e7eb;
            padding: 1.25rem 1.5rem;
        }
        
        .table tr {
            transition: var(--transition);
        }
        
        .table tr:hover {
            background: rgba(59, 130, 246, 0.05);
            transform: scale(1.01);
        }
        
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.875rem;
            font-weight: 700;
            transition: var(--transition);
        }
        
        .badge-success {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            color: #166534;
        }
        
        .badge-warning {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            color: #92400e;
        }
        
        .badge-danger {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            color: #991b1b;
        }
        
        .badge-info {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            color: #1e40af;
        }
        
        .message-bubble {
            max-width: 70%;
            padding: 1rem 1.25rem;
            border-radius: 1.5rem;
            margin-bottom: 1rem;
            animation: slideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }
        
        .message-bubble::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.1) 100%);
            pointer-events: none;
        }
        
        .message-sent {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 0.5rem;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }
        
        .message-received {
            background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
            color: #374151;
            margin-right: auto;
            border-bottom-left-radius: 0.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .notification-dot {
            position: absolute;
            top: -0.25rem;
            right: -0.25rem;
            width: 0.75rem;
            height: 0.75rem;
            background: linear-gradient(135deg, var(--danger), #dc2626);
            border-radius: 50%;
            border: 2px solid white;
            animation: pulse 2s infinite;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
        }
        
        .fade-in {
            animation: slideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .page {
            animation: slideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .loading {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid rgba(243, 244, 246, 0.8);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 1rem;
            animation: modalFadeIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 1.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            animation: modalSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
        }
        
        .avatar {
            background: linear-gradient(135deg, var(--primary), var(--success));
            color: white;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }
        
        .typewriter {
            overflow: hidden;
            border-right: 3px solid var(--primary);
            white-space: nowrap;
            animation: typewriter 3s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .hover-lift {
            transition: var(--transition);
        }
        
        .hover-lift:hover {
            transform: translateY(-5px);
        }
        
        .pulse-glow {
            animation: pulse-glow 2s infinite;
        }
        
        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        
        .mobile-menu {
            transform: translateX(-100%);
        }
        
        .mobile-menu.open {
            transform: translateX(0);
        }
        
        /* Styles pour la page de connexion */
    .login-container {
    background: 
        radial-gradient(circle at 20% 30%, rgba(0, 0, 0, 0.2) 0%, transparent 50%),
        linear-gradient(135deg, #000000 0%, #1f2937 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
}
/* Effet de poussière d'or */
.login-container::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
        radial-gradient(circle at 20% 30%, rgba(245, 158, 11, 0.1) 0px, transparent 2px),
        radial-gradient(circle at 40% 70%, rgba(245, 158, 11, 0.08) 0px, transparent 3px),
        radial-gradient(circle at 60% 20%, rgba(245, 158, 11, 0.06) 0px, transparent 2px),
        radial-gradient(circle at 80% 50%, rgba(245, 158, 11, 0.04) 0px, transparent 3px);
    background-size: 200px 200px;
    animation: floatGold 20s linear infinite;
    pointer-events: none;
}

@keyframes floatGold {
    0% { background-position: 0 0; }
    100% { background-position: 200px 200px; }
} 
        
        .login-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000" opacity="0.1"><polygon fill="%23FFFFFF" points="0,1000 1000,0 1000,1000"/></svg>');
            background-size: cover;
        }
        
       .login-card {
    background: rgba(15, 23, 42, 0.85);
    backdrop-filter: blur(25px) saturate(200%);
    border-radius: 1.5rem;
    box-shadow: 
        0 30px 60px -12px rgba(0, 0, 0, 0.8),
        0 0 0 2px rgba(245, 158, 11, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        inset 0 0 20px rgba(245, 158, 11, 0.05);
    border: 2px solid rgba(245, 158, 11, 0.2);
    animation: slideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    overflow: hidden;
    z-index: 1;
}

/* Bordure dorée animée */
.login-card::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, 
        transparent 25%, 
        rgba(245, 158, 11, 0.5) 50%, 
        transparent 75%
    );
    background-size: 200% 200%;
    border-radius: 1.6rem;
    animation: shineBorder 3s linear infinite;
    z-index: -1;
}

@keyframes shineBorder {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

.login-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, 
        transparent,
        rgba(245, 158, 11, 0.8),
        rgba(217, 119, 6, 0.8),
        rgba(245, 158, 11, 0.8),
        transparent
    );
    border-radius: 1.5rem 1.5rem 0 0;
}
        
        .floating-shapes {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 0;
}

.shape {
    position: absolute;
    background: rgba(59, 130, 246, 0.1);
    border-radius: 50%;
    filter: blur(20px);
    animation: float 15s infinite linear;
}

.shape:nth-child(1) {
    width: 200px;
    height: 200px;
    top: 10%;
    left: 10%;
    background: radial-gradient(circle, rgba(59, 130, 246, 0.2), transparent 70%);
    animation-delay: 0s;
}

.shape:nth-child(2) {
    width: 300px;
    height: 300px;
    top: 70%;
    left: 80%;
    background: radial-gradient(circle, rgba(139, 92, 246, 0.15), transparent 70%);
    animation-delay: -5s;
    animation-duration: 20s;
}

.shape:nth-child(3) {
    width: 150px;
    height: 150px;
    top: 20%;
    left: 85%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.1), transparent 70%);
    animation-delay: -10s;
    animation-duration: 25s;
}

.shape:nth-child(4) {
    width: 250px;
    height: 250px;
    top: 80%;
    left: 15%;
    background: radial-gradient(circle, rgba(59, 130, 246, 0.25), transparent 70%);
    animation-delay: -7s;
    animation-duration: 18s;
}
    </style>
</head>
<body class="antialiased">
    <!-- Page de connexion (affichée par défaut) -->
    <div id="loginPage" class="login-container">
        <!-- Formes flottantes décoratives -->
        <div class="floating-shapes">
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
        </div>
        
        <!-- Carte de connexion -->
        <div class="login-card w-full max-w-md mx-4">
            <div class="p-8">
                <!-- En-tête -->
                <div class="text-center mb-8">
                    <div class="w-20 h-20 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center mx-auto mb-4 floating pulse-glow">
                        <i class="fas fa-graduation-cap text-2xl text-white"></i>
                    </div>
                    <h1 class="text-3xl font-bold text-gray-900 mb-2 typewriter">ÉcoleNumériqueCI</h1>
                    <p class="text-gray-600">Système de Gestion Scolaire</p>
                    <div class="mt-2 text-sm text-gray-500">
                        <i class="fas fa-school mr-1"></i>
                        Collège le Bachelier de Port-Bouët
                    </div>
                </div>

                <!-- Formulaire de connexion -->
                <form id="loginForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-user mr-2"></i>Nom d'utilisateur
                        </label>
                        <input 
                            type="text" 
                            id="username" 
                            class="input" 
                            placeholder="Entrez votre nom d'utilisateur"
                            required
                        >
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-lock mr-2"></i>Mot de passe
                        </label>
                        <input 
                            type="password" 
                            id="password" 
                            class="input" 
                            placeholder="Entrez votre mot de passe"
                            required
                        >
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <input 
                                type="checkbox" 
                                id="rememberMe"
                                class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"
                            >
                            <label for="rememberMe" class="ml-2 text-sm text-gray-600">
                                Se souvenir de moi
                            </label>
                        </div>
                        <a href="#" class="text-sm text-blue-600 hover:text-blue-800 transition-colors">
                            Mot de passe oublié ?
                        </a>
                    </div>

                    <button 
                        type="submit" 
                        class="btn btn-primary w-full"
                        id="loginBtn"
                    >
                        <i class="fas fa-sign-in-alt mr-2"></i>
                        Se connecter
                    </button>
                </form>

                <!-- Informations supplémentaires -->
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <div class="text-center">
                        <p class="text-sm text-gray-600 mb-4">
                            <i class="fas fa-info-circle mr-1"></i>
                            Accès sécurisé au système de gestion
                        </p>
                        
                        <!-- Indicateurs de sécurité -->
                        <div class="flex items-center justify-center gap-4 text-xs text-gray-500">
                            <div class="flex items-center">
                                <i class="fas fa-shield-alt text-green-500 mr-1"></i>
                                <span>Sécurisé</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-bolt text-yellow-500 mr-1"></i>
                                <span>Rapide</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-cloud text-blue-500 mr-1"></i>
                                <span>Cloud</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Version et copyright -->
                <div class="mt-6 text-center">
                    <p class="text-xs text-gray-500">
                        Version 4.0.0 • © 2025 ÉcoleNumériqueCI
                    </p>
                </div>
            </div>
        </div>

        <!-- Indicateur de chargement (caché par défaut) -->
        <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-2xl p-8 text-center">
                <div class="loading mx-auto mb-4"></div>
                <p class="text-gray-700">Connexion en cours...</p>
            </div>
        </div>
    </div>

    <!-- Application principale (cachée par défaut) -->
    <div id="app" class="min-h-screen flex hidden">
        <!-- Page de chargement -->
        <div id="loadingScreen" class="fixed inset-0 bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center z-50">
            <div class="text-center text-white">
                <div class="w-20 h-20 rounded-full bg-white/20 flex items-center justify-center mb-6 mx-auto pulse-glow">
                    <i class="fas fa-graduation-cap text-3xl text-white"></i>
                </div>
                <h1 class="text-4xl font-bold mb-4 typewriter">ÉcoleNumériqueCI</h1>
                <p class="text-white/80 mb-6">Chargement du système de gestion scolaire...</p>
                <div class="w-48 h-2 bg-white/30 rounded-full mx-auto overflow-hidden">
                    <div id="loadingBar" class="h-full bg-white rounded-full transition-all duration-1000" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- Sidebar amélioré -->
        <aside class="sidebar w-80 min-h-screen flex flex-col p-6">
            <div class="flex items-center justify-between mb-8">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-full avatar flex items-center justify-center text-xl font-bold floating">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div>
                        <div class="font-bold text-lg sidebar-text">ÉcoleNumériqueCI</div>
                        <div class="text-blue-100 text-sm sidebar-text">Système Intelligent</div>
                    </div>
                </div>
                <button id="sidebarToggle" class="p-2 rounded-lg hover:bg-white/10 text-white transition-all duration-300">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <nav class="flex-1 space-y-1">
                <a class="nav-item active flex items-center p-3" href="#" data-page="dashboard">
                    <i class="fas fa-chart-line w-6 text-center"></i>
                    <span class="sidebar-text ml-3">Tableau de bord</span>
                    <span class="ml-auto w-2 h-2 bg-green-400 rounded-full pulse-glow"></span>
                </a>
                <a class="nav-item flex items-center p-3" href="#" data-page="eleves">
                    <i class="fas fa-users w-6 text-center"></i>
                    <span class="sidebar-text ml-3">Gestion des élèves</span>
                </a>
                <a class="nav-item flex items-center p-3" href="#" data-page="enseignants">
                    <i class="fas fa-chalkboard-teacher w-6 text-center"></i>
                    <span class="sidebar-text ml-3">Enseignants</span>
                </a>
                <a class="nav-item flex items-center p-3" href="#" data-page="classes">
                    <i class="fas fa-door-open w-6 text-center"></i>
                    <span class="sidebar-text ml-3">Classes & Matières</span>
                </a>
                <a class="nav-item flex items-center p-3" href="#" data-page="notes">
                    <i class="fas fa-book-open w-6 text-center"></i>
                    <span class="sidebar-text ml-3">Notes & Évaluations</span>
                </a>
                <a class="nav-item flex items-center p-3" href="#" data-page="absences">
                    <i class="fas fa-user-clock w-6 text-center"></i>
                    <span class="sidebar-text ml-3">Absences</span>
                </a>
                <a class="nav-item flex items-center p-3" href="#" data-page="emploi-du-temps">
                    <i class="fas fa-calendar-alt w-6 text-center"></i>
                    <span class="sidebar-text ml-3">Emploi du temps</span>
                </a>
                <a class="nav-item flex items-center p-3 relative" href="#" data-page="messagerie">
                    <i class="fas fa-comments w-6 text-center"></i>
                    <span class="sidebar-text ml-3">Messagerie</span>
                    <span class="notification-dot"></span>
                </a>
                <a class="nav-item flex items-center p-3" href="#" data-page="finances">
                    <i class="fas fa-money-bill-wave w-6 text-center"></i>
                    <span class="sidebar-text ml-3">Finances</span>
                </a>
                <a class="nav-item flex items-center p-3" href="#" data-page="parametres">
                    <i class="fas fa-cog w-6 text-center"></i>
                    <span class="sidebar-text ml-3">Paramètres</span>
                </a>
            </nav>

            <div class="mt-auto pt-6 border-t border-blue-400/30">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-200 to-green-200 flex items-center justify-center text-blue-800 font-semibold shadow-lg">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="sidebar-text">
                        <div class="font-medium" id="userName">Administrateur</div>
                        <div class="text-blue-100 text-sm" id="userRole">Super Admin</div>
                    </div>
                </div>
                <div class="text-xs text-blue-200/80 sidebar-text">
                    <div><i class="fas fa-circle text-green-400 mr-1"></i> En ligne • <span id="currentTime"></span></div>
                    <div class="mt-1"><i class="fas fa-school mr-1"></i> Collège le Bachelier de Port-Bouët</div>
                </div>
            </div>
        </aside>

        <!-- Contenu principal -->
        <div class="flex-1 flex flex-col">
            <!-- Barre supérieure améliorée -->
            <header class="bg-white/80 backdrop-blur-lg shadow-sm border-b border-gray-200/50 p-4 sticky top-0 z-40">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <button id="mobileMenuBtn" class="p-2 rounded-lg hover:bg-gray-100/80 md:hidden transition-all duration-300">
                            <i class="fas fa-bars text-gray-700"></i>
                        </button>
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900" id="pageTitle">Tableau de bord</h1>
                            <div class="text-sm text-gray-500 flex items-center" id="pageSubtitle">
                                <span>Aperçu général du système</span>
                                <span class="mx-2">•</span>
                                <span class="flex items-center text-green-600">
                                    <i class="fas fa-circle text-xs mr-1"></i>
                                    Système opérationnel
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="flex items-center gap-4">
                        <div class="relative hidden md:block">
                            <input id="globalSearch" type="search" placeholder="Rechercher un élève, une classe..." class="input pl-10 w-64">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        </div>

                        <div class="flex items-center gap-3">
                            <!-- Indicateur de performance en temps réel -->
                            <div class="hidden lg:flex items-center gap-2 px-3 py-2 bg-blue-50 rounded-lg">
                                <div class="w-2 h-2 bg-green-500 rounded-full pulse-glow"></div>
                                <span class="text-sm font-medium text-blue-700">Performance: 98%</span>
                            </div>

                            <div class="relative">
                                <button id="notificationsBtn" class="p-2 rounded-full bg-white/80 backdrop-blur-sm hover:bg-gray-100/80 relative transition-all duration-300">
                                    <i class="fas fa-bell text-gray-600"></i>
                                    <span class="notification-dot"></span>
                                </button>
                                <div id="notificationsDropdown" class="hidden absolute right-0 mt-2 w-80 bg-white/90 backdrop-blur-lg rounded-xl shadow-2xl border border-gray-200/50 z-50">
                                    <div class="p-4 border-b border-gray-200/50">
                                        <div class="flex items-center justify-between">
                                            <h3 class="text-lg font-semibold text-gray-900">Notifications</h3>
                                            <button class="text-sm text-blue-600 font-medium hover:text-blue-800 transition-colors" id="markAllAsRead">Tout marquer comme lu</button>
                                        </div>
                                    </div>
                                    <div class="max-h-96 overflow-y-auto">
                                        <ul id="notificationsList"></ul>
                                    </div>
                                    <div class="p-3 border-t border-gray-200/50 text-center bg-gray-50/50">
                                        <a href="#" class="text-sm text-blue-600 font-medium hover:text-blue-800 transition-colors">Voir toutes les notifications</a>
                                    </div>
                                </div>
                            </div>

                            <button id="logoutBtn" class="btn btn-outline">
                                <i class="fas fa-sign-out-alt mr-2"></i>
                                Déconnexion
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Contenu des pages -->
            <main class="flex-1 p-6 overflow-auto">
                <!-- Tableau de bord ultra dynamique -->
                <section id="page-dashboard" class="page space-y-6">
                    <!-- Alertes intelligentes en temps réel -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-3">
                            <div class="bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4 shadow-lg hover-lift">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center mr-3">
                                        <i class="fas fa-exclamation-triangle text-amber-500"></i>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="font-semibold text-amber-800">Alertes en temps réel</h3>
                                        <p class="text-amber-700 text-sm" id="dashboardAlerts">Analyse du système en cours...</p>
                                    </div>
                                    <div class="flex gap-2">
                                        <button class="p-2 text-amber-600 hover:text-amber-800 hover:bg-amber-100 rounded-lg transition-all duration-300">
                                            <i class="fas fa-sync-alt"></i>
                                        </button>
                                        <button class="p-2 text-amber-600 hover:text-amber-800 hover:bg-amber-100 rounded-lg transition-all duration-300">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Cartes de statistiques animées -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <!-- Carte Effectif total -->
                        <div class="stat-card p-6 hover-lift">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Effectif total</p>
                                    <p id="statEffectif" class="text-3xl font-bold text-gray-900 mt-1">-</p>
                                </div>
                                <div class="p-3 rounded-full bg-blue-100 text-blue-600 shadow-lg">
                                    <i class="fas fa-users text-xl"></i>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm text-gray-500">
                                    <span>Filles</span>
                                    <span id="statFilles">-</span>
                                </div>
                                <div class="progress-bar">
                                    <div id="statFillesProgress" class="progress-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Carte Taux de présence -->
                        <div class="stat-card p-6 hover-lift">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Taux de présence</p>
                                    <p id="statPresence" class="text-3xl font-bold text-green-600 mt-1">-</p>
                                </div>
                                <div class="p-3 rounded-full bg-green-100 text-green-600 shadow-lg">
                                    <i class="fas fa-user-check text-xl"></i>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm text-gray-500">
                                    <span>Aujourd'hui</span>
                                    <span id="statPresents">-</span>
                                </div>
                                <div class="progress-bar">
                                    <div id="statPresenceProgress" class="progress-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Carte Moyenne générale -->
                        <div class="stat-card p-6 hover-lift">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Moyenne générale</p>
                                    <p id="statMoyenne" class="text-3xl font-bold text-purple-600 mt-1">-</p>
                                </div>
                                <div class="p-3 rounded-full bg-purple-100 text-purple-600 shadow-lg">
                                    <i class="fas fa-chart-line text-xl"></i>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm text-gray-500">
                                    <span>Évolution</span>
                                    <span id="statEvolution">-</span>
                                </div>
                                <div class="progress-bar">
                                    <div id="statMoyenneProgress" class="progress-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Carte Enseignants -->
                        <div class="stat-card p-6 hover-lift">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Personnel enseignant</p>
                                    <p id="statEnseignants" class="text-3xl font-bold text-amber-600 mt-1">-</p>
                                </div>
                                <div class="p-3 rounded-full bg-amber-100 text-amber-600 shadow-lg">
                                    <i class="fas fa-chalkboard-teacher text-xl"></i>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm text-gray-500">
                                    <span>Matières couvertes</span>
                                    <span id="statMatieres">-</span>
                                </div>
                                <div class="progress-bar">
                                    <div id="statEnseignantsProgress" class="progress-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Graphiques et actions rapides améliorés -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Graphiques interactifs -->
                        <div class="lg:col-span-2 space-y-6">
                            <!-- Graphique de performance animé -->
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between mb-6">
                                    <h2 class="text-lg font-semibold text-gray-900">Performance académique en temps réel</h2>
                                    <div class="flex items-center gap-2">
                                        <select id="chartPeriod" class="input text-sm bg-white/80">
                                            <option value="trimestre1">Trimestre 1</option>
                                            <option value="trimestre2">Trimestre 2</option>
                                            <option value="trimestre3">Trimestre 3</option>
                                        </select>
                                        <button id="refreshStats" class="btn btn-outline text-sm">
                                            <i class="fas fa-sync-alt mr-1"></i> Actualiser
                                        </button>
                                    </div>
                                </div>
                                <canvas id="performanceChart" height="250"></canvas>
                            </div>

                            <!-- Graphique des effectifs animé -->
                            <div class="stat-card p-6 hover-lift">
                                <h2 class="text-lg font-semibold text-gray-900 mb-6">Répartition par niveau</h2>
                                <canvas id="effectifsChart" height="200"></canvas>
                            </div>
                        </div>

                        <!-- Actions rapides et activités améliorées -->
                        <div class="space-y-6">
                            <!-- Actions rapides avec animations -->
                            <div class="stat-card p-6 hover-lift">
                                <h2 class="text-lg font-semibold text-gray-900 mb-4">Actions rapides</h2>
                                <div class="grid grid-cols-1 gap-3">
                                    <button class="btn btn-primary justify-start hover-lift" data-action="nouvel-eleve">
                                        <i class="fas fa-user-plus mr-3"></i>
                                        Nouvel élève
                                    </button>
                                    <button class="btn btn-success justify-start hover-lift" id="btnGenererRapport">
                                        <i class="fas fa-file-pdf mr-3"></i>
                                        Rapport mensuel
                                    </button>
                                    <button class="btn btn-outline justify-start hover-lift" data-action="saisir-notes">
                                        <i class="fas fa-edit mr-3"></i>
                                        Saisir notes
                                    </button>
                                    <button class="btn btn-outline justify-start hover-lift" data-action="nouveau-message">
                                        <i class="fas fa-envelope mr-3"></i>
                                        Nouveau message
                                    </button>
                                </div>
                            </div>

                            <!-- Activités récentes animées -->
                            <div class="stat-card p-6 hover-lift">
                                <h2 class="text-lg font-semibold text-gray-900 mb-4">Activités récentes</h2>
                                <div class="space-y-4" id="recentActivities">
                                    <!-- Les activités seront chargées ici -->
                                </div>
                            </div>

                            <!-- Prochains événements animés -->
                            <div class="stat-card p-6 hover-lift">
                                <h2 class="text-lg font-semibold text-gray-900 mb-4">Prochains événements</h2>
                                <div class="space-y-3" id="upcomingEvents">
                                    <!-- Les événements seront chargés ici -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Autres pages avec animations -->
                <section id="page-eleves" class="page hidden">
                    <div class="stat-card p-6 hover-lift">
                        <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-900">Gestion des élèves</h2>
                                <p class="text-gray-600 mt-2">Gérez les inscriptions, fiches et dossiers des élèves</p>
                            </div>
                            <div class="flex gap-3 mt-4 md:mt-0">
                                <button class="btn btn-outline hover-lift" data-action="exporter-eleves">
                                    <i class="fas fa-download mr-2"></i>
                                    Exporter
                                </button>
                                <button class="btn btn-primary hover-lift" data-action="nouvel-eleve">
                                    <i class="fas fa-plus mr-2"></i>
                                    Nouvel élève
                                </button>
                            </div>
                        </div>

                        <div class="table-container hover-lift">
                            <table class="table w-full">
                                <thead>
                                    <tr>
                                        <th class="px-6 py-4 text-left">Élève</th>
                                        <th class="px-6 py-4 text-left">Classe</th>
                                        <th class="px-6 py-4 text-left">Matricule</th>
                                        <th class="px-6 py-4 text-left">Contact</th>
                                        <th class="px-6 py-4 text-left">Statut</th>
                                        <th class="px-6 py-4 text-right">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="elevesTable">
                                    <!-- Les données des élèves seront chargées ici -->
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination améliorée -->
                        <div class="flex items-center justify-between mt-6">
                            <div class="text-sm text-gray-700">
                                Affichage de <span id="paginationStart">1</span> à <span id="paginationEnd">10</span> sur <span id="paginationTotal">0</span> élèves
                            </div>
                            <div class="flex gap-2">
                                <button class="btn btn-outline px-3 hover-lift" id="prevPage">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="btn btn-outline px-3 hover-lift" id="nextPage">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Page Gestion des enseignants -->
                <section id="page-enseignants" class="page hidden">
                    <div class="space-y-6">
                        <!-- En-tête avec statistiques -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Enseignants actifs</p>
                                        <p id="statEnseignantsTotal" class="text-3xl font-bold text-blue-600 mt-1">-</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-blue-100 text-blue-600 shadow-lg">
                                        <i class="fas fa-chalkboard-teacher text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Matières enseignées</p>
                                        <p id="statMatiereEnseignants" class="text-3xl font-bold text-green-600 mt-1">-</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-green-100 text-green-600 shadow-lg">
                                        <i class="fas fa-book text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Taux de présence</p>
                                        <p id="statPresenceEnseignants" class="text-3xl font-bold text-purple-600 mt-1">-</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-purple-100 text-purple-600 shadow-lg">
                                        <i class="fas fa-user-check text-xl"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Contrôles et actions -->
                        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-900">Gestion des Enseignants</h2>
                                <p class="text-gray-600 mt-2">Gérez le personnel enseignant, leurs matières et affectations</p>
                            </div>
                            <div class="flex gap-3">
                                <button class="btn btn-outline hover-lift" data-action="exporter-enseignants">
                                    <i class="fas fa-download mr-2"></i>
                                    Exporter
                                </button>
                                <button class="btn btn-primary hover-lift" data-action="nouvel-enseignant">
                                    <i class="fas fa-plus mr-2"></i>
                                    Nouvel enseignant
                                </button>
                                <button class="btn btn-success hover-lift" data-action="affecter-matiere">
                                    <i class="fas fa-book-medical mr-2"></i>
                                    Affecter matière
                                </button>
                            </div>
                        </div>

                        <!-- Navigation par onglets -->
                        <div class="bg-white/80 backdrop-blur-lg rounded-2xl border border-gray-200/50 overflow-hidden">
                            <div class="border-b border-gray-200/50">
                                <nav class="flex space-x-8 px-6">
                                    <button class="tab-btn-enseignants py-4 px-2 border-b-2 border-blue-500 text-blue-600 font-medium" data-tab="liste-enseignants">
                                        <i class="fas fa-list mr-2"></i>
                                        Liste des enseignants
                                    </button>
                                    <button class="tab-btn-enseignants py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="matieres-enseignants">
                                        <i class="fas fa-book mr-2"></i>
                                        Matières par enseignant
                                    </button>
                                    <button class="tab-btn-enseignants py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="emploi-enseignants">
                                        <i class="fas fa-calendar-alt mr-2"></i>
                                        Emploi du temps
                                    </button>
                                </nav>
                            </div>

                            <!-- Contenu des onglets -->
                            <div class="p-6">
                                <!-- Onglet Liste des enseignants -->
                                <div id="tab-liste-enseignants" class="tab-content-enseignants">
                                    <div class="table-container hover-lift">
                                        <table class="table w-full">
                                            <thead>
                                                <tr>
                                                    <th class="px-6 py-4 text-left">Enseignant</th>
                                                    <th class="px-6 py-4 text-left">Matière principale</th>
                                                    <th class="px-6 py-4 text-left">Classes</th>
                                                    <th class="px-6 py-4 text-left">Contact</th>
                                                    <th class="px-6 py-4 text-left">Statut</th>
                                                    <th class="px-6 py-4 text-right">Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody id="enseignantsTable">
                                                <!-- Les données des enseignants seront chargées ici -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- Onglet Matières par enseignant -->
                                <div id="tab-matieres-enseignants" class="tab-content-enseignants hidden">
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                        <div class="stat-card p-6 hover-lift">
                                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Affecter une matière</h3>
                                            <form id="affectationMatiereForm" class="space-y-4">
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 mb-2">Enseignant</label>
                                                    <select class="input" id="enseignantMatiereSelect">
                                                        <option value="">Sélectionner un enseignant</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 mb-2">Matière</label>
                                                    <select class="input" id="matiereEnseignantSelect">
                                                        <option value="">Sélectionner une matière</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 mb-2">Classes</label>
                                                    <select class="input" id="classesEnseignantSelect" multiple>
                                                        <option value="">Sélectionner une ou plusieurs classes</option>
                                                    </select>
                                                </div>
                                                <button type="submit" class="btn btn-primary w-full">
                                                    <i class="fas fa-link mr-2"></i>
                                                    Affecter la matière
                                                </button>
                                            </form>
                                        </div>
                                        
                                        <div class="stat-card p-6 hover-lift">
                                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Affectations en cours</h3>
                                            <div class="space-y-3 max-h-96 overflow-y-auto" id="affectationsEnseignantsList">
                                                <!-- Liste des affectations -->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Emploi du temps -->
                                <div id="tab-emploi-enseignants" class="tab-content-enseignants hidden">
                                    <div class="stat-card p-6 hover-lift">
                                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Emploi du temps des enseignants</h3>
                                        <div class="flex items-center gap-4 mb-6">
                                            <select class="input" id="enseignantEmploiSelect">
                                                <option value="">Sélectionner un enseignant</option>
                                            </select>
                                            <button class="btn btn-primary" id="genererEmploiBtn">
                                                <i class="fas fa-calendar-plus mr-2"></i>
                                                Générer l'emploi du temps
                                            </button>
                                        </div>
                                        <div id="emploiDuTempsContainer">
                                            <p class="text-gray-500 text-center py-8">Sélectionnez un enseignant pour afficher son emploi du temps</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Interface de gestion des classes et matières -->
                <section id="page-classes" class="page hidden">
                    <div class="space-y-6">
                        <!-- En-tête avec statistiques -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Classes actives</p>
                                        <p id="statClasses" class="text-3xl font-bold text-blue-600 mt-1">-</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-blue-100 text-blue-600 shadow-lg">
                                        <i class="fas fa-door-open text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Matières enseignées</p>
                                        <p id="statMatieresTotal" class="text-3xl font-bold text-green-600 mt-1">-</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-green-100 text-green-600 shadow-lg">
                                        <i class="fas fa-book text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Effectif total</p>
                                        <p id="statEffectifClasses" class="text-3xl font-bold text-purple-600 mt-1">-</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-purple-100 text-purple-600 shadow-lg">
                                        <i class="fas fa-users text-xl"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Contrôles et actions -->
                        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-900">Gestion des Classes & Matières</h2>
                                <p class="text-gray-600 mt-2">Organisez les classes, matières et enseignants</p>
                            </div>
                            <div class="flex gap-3">
                                <button class="btn btn-outline hover-lift" data-action="exporter-classes">
                                    <i class="fas fa-download mr-2"></i>
                                    Exporter
                                </button>
                                <button class="btn btn-primary hover-lift" data-action="nouvelle-classe">
                                    <i class="fas fa-plus mr-2"></i>
                                    Nouvelle classe
                                </button>
                                <button class="btn btn-success hover-lift" data-action="nouvelle-matiere">
                                    <i class="fas fa-book-medical mr-2"></i>
                                    Nouvelle matière
                                </button>
                            </div>
                        </div>

                        <!-- Navigation par onglets -->
                        <div class="bg-white/80 backdrop-blur-lg rounded-2xl border border-gray-200/50 overflow-hidden">
                            <div class="border-b border-gray-200/50">
                                <nav class="flex space-x-8 px-6">
                                    <button class="tab-btn py-4 px-2 border-b-2 border-blue-500 text-blue-600 font-medium" data-tab="classes">
                                        <i class="fas fa-door-open mr-2"></i>
                                        Classes
                                    </button>
                                    <button class="tab-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="matieres">
                                        <i class="fas fa-book mr-2"></i>
                                        Matières
                                    </button>
                                    <button class="tab-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="affectations">
                                        <i class="fas fa-link mr-2"></i>
                                        Affectations
                                    </button>
                                </nav>
                            </div>

                            <!-- Contenu des onglets -->
                            <div class="p-6">
                                <!-- Onglet Classes -->
                                <div id="tab-classes" class="tab-content">
                                    <div class="table-container hover-lift">
                                        <table class="table w-full">
                                            <thead>
                                                <tr>
                                                    <th class="px-6 py-4 text-left">Classe</th>
                                                    <th class="px-6 py-4 text-left">Niveau</th>
                                                    <th class="px-6 py-4 text-left">Effectif</th>
                                                    <th class="px-6 py-4 text-left">Professeur Principal</th>
                                                    <th class="px-6 py-4 text-left">Salle</th>
                                                    <th class="px-6 py-4 text-left">Statut</th>
                                                    <th class="px-6 py-4 text-right">Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody id="classesTable">
                                                <!-- Les données des classes seront chargées ici -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- Onglet Matières -->
                                <div id="tab-matieres" class="tab-content hidden">
                                    <div class="table-container hover-lift">
                                        <table class="table w-full">
                                            <thead>
                                                <tr>
                                                    <th class="px-6 py-4 text-left">Matière</th>
                                                    <th class="px-6 py-4 text-left">Code</th>
                                                    <th class="px-6 py-4 text-left">Coefficient</th>
                                                    <th class="px-6 py-4 text-left">Enseignants</th>
                                                    <th class="px-6 py-4 text-left">Classes</th>
                                                    <th class="px-6 py-4 text-left">Statut</th>
                                                    <th class="px-6 py-4 text-right">Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody id="matieresTable">
                                                <!-- Les données des matières seront chargées ici -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- Onglet Affectations -->
                                <div id="tab-affectations" class="tab-content hidden">
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                        <div class="stat-card p-6 hover-lift">
                                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Affecter un enseignant</h3>
                                            <form id="affectationForm" class="space-y-4">
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 mb-2">Enseignant</label>
                                                    <select class="input" id="enseignantSelect">
                                                        <option value="">Sélectionner un enseignant</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 mb-2">Matière</label>
                                                    <select class="input" id="matiereSelect">
                                                        <option value="">Sélectionner une matière</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 mb-2">Classe</label>
                                                    <select class="input" id="classeSelect">
                                                        <option value="">Sélectionner une classe</option>
                                                    </select>
                                                </div>
                                                <button type="submit" class="btn btn-primary w-full">
                                                    <i class="fas fa-link mr-2"></i>
                                                    Affecter
                                                </button>
                                            </form>
                                        </div>
                                        
                                        <div class="stat-card p-6 hover-lift">
                                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Affectations en cours</h3>
                                            <div class="space-y-3" id="affectationsList">
                                                <!-- Liste des affectations -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Page Notes & Évaluations (COMPLÉTÉE) -->
                <section id="page-notes" class="page hidden">
                    <div class="space-y-6">
                        <!-- Statistiques -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Notes saisies</p>
                                        <p class="text-3xl font-bold text-blue-600 mt-1" id="notesSaisies">248</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-blue-100 text-blue-600 shadow-lg">
                                        <i class="fas fa-edit text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Moyenne générale</p>
                                        <p class="text-3xl font-bold text-green-600 mt-1" id="moyenneGenerale">14.2</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-green-100 text-green-600 shadow-lg">
                                        <i class="fas fa-chart-line text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Meilleure note</p>
                                        <p class="text-3xl font-bold text-purple-600 mt-1" id="meilleureNote">19.5</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-purple-100 text-purple-600 shadow-lg">
                                        <i class="fas fa-trophy text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Évaluations</p>
                                        <p class="text-3xl font-bold text-amber-600 mt-1" id="nombreEvaluations">12</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-amber-100 text-amber-600 shadow-lg">
                                        <i class="fas fa-clipboard-check text-xl"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Contrôles et actions -->
                        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-900">Notes & Évaluations</h2>
                                <p class="text-gray-600 mt-2">Saisissez et gérez les notes, créez des bulletins et suivez les performances</p>
                            </div>
                            <div class="flex gap-3">
                                <button class="btn btn-outline hover-lift" data-action="exporter-notes">
                                    <i class="fas fa-download mr-2"></i>
                                    Exporter bulletins
                                </button>
                                <button class="btn btn-primary hover-lift" data-action="saisir-notes">
                                    <i class="fas fa-plus mr-2"></i>
                                    Saisir notes
                                </button>
                                <button class="btn btn-success hover-lift" data-action="creer-evaluation">
                                    <i class="fas fa-clipboard-list mr-2"></i>
                                    Nouvelle évaluation
                                </button>
                            </div>
                        </div>

                        <!-- Navigation par onglets -->
                        <div class="bg-white/80 backdrop-blur-lg rounded-2xl border border-gray-200/50 overflow-hidden">
                            <div class="border-b border-gray-200/50">
                                <nav class="flex space-x-8 px-6">
                                    <button class="tab-btn-notes py-4 px-2 border-b-2 border-blue-500 text-blue-600 font-medium" data-tab="saisie-notes">
                                        <i class="fas fa-edit mr-2"></i>
                                        Saisie de notes
                                    </button>
                                    <button class="tab-btn-notes py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="bulletins">
                                        <i class="fas fa-file-alt mr-2"></i>
                                        Bulletins
                                    </button>
                                    <button class="tab-btn-notes py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="evaluations">
                                        <i class="fas fa-clipboard-list mr-2"></i>
                                        Évaluations
                                    </button>
                                    <button class="tab-btn-notes py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="statistiques-notes">
                                        <i class="fas fa-chart-bar mr-2"></i>
                                        Statistiques
                                    </button>
                                </nav>
                            </div>

                            <!-- Contenu des onglets -->
                            <div class="p-6">
                                <!-- Onglet Saisie de notes -->
                                <div id="tab-saisie-notes" class="tab-content-notes">
                                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                        <div class="lg:col-span-2">
                                            <div class="stat-card p-6 hover-lift">
                                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Saisie des notes par classe</h3>
                                                <form id="saisieNotesForm" class="space-y-4">
                                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                                        <div>
                                                            <label class="block text-sm font-medium text-gray-700 mb-2">Classe</label>
                                                            <select class="input" id="classeNotesSelect" required>
                                                                <option value="">Sélectionner une classe</option>
                                                                <option value="6A">6ème A</option>
                                                                <option value="5B">5ème B</option>
                                                                <option value="4C">4ème C</option>
                                                                <option value="3A">3ème A</option>
                                                            </select>
                                                        </div>
                                                        <div>
                                                            <label class="block text-sm font-medium text-gray-700 mb-2">Matière</label>
                                                            <select class="input" id="matiereNotesSelect" required>
                                                                <option value="">Sélectionner une matière</option>
                                                                <option value="math">Mathématiques</option>
                                                                <option value="fr">Français</option>
                                                                <option value="sc">Sciences</option>
                                                                <option value="hist">Histoire-Géo</option>
                                                            </select>
                                                        </div>
                                                        <div>
                                                            <label class="block text-sm font-medium text-gray-700 mb-2">Type d'évaluation</label>
                                                            <select class="input" id="typeEvaluationSelect" required>
                                                                <option value="">Type d'évaluation</option>
                                                                <option value="devoir">Devoir</option>
                                                                <option value="examen">Examen</option>
                                                                <option value="oral">Oral</option>
                                                                <option value="projet">Projet</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="table-container max-h-96 overflow-y-auto">
                                                        <table class="table w-full">
                                                            <thead>
                                                                <tr>
                                                                    <th class="px-4 py-3">Élève</th>
                                                                    <th class="px-4 py-3">Note (/20)</th>
                                                                    <th class="px-4 py-3">Appréciation</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="tableauSaisieNotes">
                                                                <!-- Rempli dynamiquement -->
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="flex justify-end gap-3">
                                                        <button type="reset" class="btn btn-outline hover-lift">Annuler</button>
                                                        <button type="submit" class="btn btn-primary hover-lift">
                                                            <i class="fas fa-save mr-2"></i>
                                                            Enregistrer les notes
                                                        </button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="stat-card p-6 hover-lift">
                                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Aide à la saisie</h3>
                                                <div class="space-y-3 text-sm text-gray-600">
                                                    <div class="flex items-center gap-2">
                                                        <i class="fas fa-info-circle text-blue-500"></i>
                                                        <span>Utilisez Tab pour naviguer entre les champs</span>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <i class="fas fa-info-circle text-blue-500"></i>
                                                        <span>Notes entre 0 et 20 uniquement</span>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <i class="fas fa-info-circle text-blue-500"></i>
                                                        <span>Appréciations optionnelles</span>
                                                    </div>
                                                </div>
                                                <div class="mt-6">
                                                    <h4 class="font-medium text-gray-900 mb-2">Dernières saisies</h4>
                                                    <div class="space-y-2" id="dernieresSaisies">
                                                        <!-- Rempli dynamiquement -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Bulletins -->
                                <div id="tab-bulletins" class="tab-content-notes hidden">
                                    <div class="stat-card p-6 hover-lift">
                                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Génération des bulletins</h3>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <div>
                                                <h4 class="font-medium text-gray-900 mb-3">Générer un bulletin</h4>
                                                <form id="generationBulletinForm" class="space-y-4">
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 mb-2">Élève</label>
                                                        <select class="input" id="eleveBulletinSelect" required>
                                                            <option value="">Sélectionner un élève</option>
                                                        </select>
                                                    </div>
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 mb-2">Trimestre</label>
                                                        <select class="input" id="trimestreBulletinSelect" required>
                                                            <option value="1">Trimestre 1</option>
                                                            <option value="2">Trimestre 2</option>
                                                            <option value="3">Trimestre 3</option>
                                                        </select>
                                                    </div>
                                                    <button type="submit" class="btn btn-primary w-full hover-lift">
                                                        <i class="fas fa-file-pdf mr-2"></i>
                                                        Générer le bulletin
                                                    </button>
                                                </form>
                                            </div>
                                            <div>
                                                <h4 class="font-medium text-gray-900 mb-3">Bulletins récents</h4>
                                                <div class="space-y-3 max-h-64 overflow-y-auto">
                                                    <!-- Rempli dynamiquement -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Évaluations -->
                                <div id="tab-evaluations" class="tab-content-notes hidden">
                                    <div class="space-y-6">
                                        <div class="stat-card p-6 hover-lift">
                                            <div class="flex flex-col md:flex-row md:items-center justify-between mb-4">
                                                <h3 class="text-lg font-semibold text-gray-900">Gestion des évaluations</h3>
                                                <button class="btn btn-primary hover-lift mt-2 md:mt-0" data-action="creer-evaluation">
                                                    <i class="fas fa-plus mr-2"></i>
                                                    Nouvelle évaluation
                                                </button>
                                            </div>
                                            <div class="table-container">
                                                <table class="table w-full">
                                                    <thead>
                                                        <tr>
                                                            <th class="px-4 py-3">Nom</th>
                                                            <th class="px-4 py-3">Type</th>
                                                            <th class="px-4 py-3">Classe</th>
                                                            <th class="px-4 py-3">Date</th>
                                                            <th class="px-4 py-3">Coefficient</th>
                                                            <th class="px-4 py-3">Actions</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="listeEvaluations">
                                                        <!-- Rempli dynamiquement -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Statistiques -->
                                <div id="tab-statistiques-notes" class="tab-content-notes hidden">
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                        <div class="stat-card p-6 hover-lift">
                                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Répartition des notes</h3>
                                            <canvas id="repartitionNotesChart" height="250"></canvas>
                                        </div>
                                        <div class="stat-card p-6 hover-lift">
                                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Évolution des moyennes</h3>
                                            <canvas id="evolutionMoyennesChart" height="250"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Page Gestion des absences (COMPLÉTÉE) -->
                <section id="page-absences" class="page hidden">
                    <div class="space-y-6">
                        <!-- Statistiques -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Absences aujourd'hui</p>
                                        <p class="text-3xl font-bold text-red-600 mt-1" id="absencesAujourdhui">5</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-red-100 text-red-600 shadow-lg">
                                        <i class="fas fa-user-times text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Taux de présence</p>
                                        <p class="text-3xl font-bold text-green-600 mt-1" id="tauxPresence">92%</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-green-100 text-green-600 shadow-lg">
                                        <i class="fas fa-user-check text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Retards aujourd'hui</p>
                                        <p class="text-3xl font-bold text-amber-600 mt-1" id="retardsAujourdhui">8</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-amber-100 text-amber-600 shadow-lg">
                                        <i class="fas fa-clock text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Absences non justifiées</p>
                                        <p class="text-3xl font-bold text-purple-600 mt-1" id="absencesNonJustifiees">3</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-purple-100 text-purple-600 shadow-lg">
                                        <i class="fas fa-exclamation-triangle text-xl"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Contrôles et actions -->
                        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-900">Gestion des absences</h2>
                                <p class="text-gray-600 mt-2">Suivez les présences, absences et retards en temps réel</p>
                            </div>
                            <div class="flex gap-3">
                                <button class="btn btn-outline hover-lift" data-action="exporter-absences">
                                    <i class="fas fa-download mr-2"></i>
                                    Exporter rapport
                                </button>
                                <button class="btn btn-primary hover-lift" data-action="pointer-absence">
                                    <i class="fas fa-user-minus mr-2"></i>
                                    Pointer une absence
                                </button>
                                <button class="btn btn-success hover-lift" data-action="pointer-presence">
                                    <i class="fas fa-user-check mr-2"></i>
                                    Pointer une présence
                                </button>
                            </div>
                        </div>

                        <!-- Navigation par onglets -->
                        <div class="bg-white/80 backdrop-blur-lg rounded-2xl border border-gray-200/50 overflow-hidden">
                            <div class="border-b border-gray-200/50">
                                <nav class="flex space-x-8 px-6">
                                    <button class="tab-btn-absences py-4 px-2 border-b-2 border-blue-500 text-blue-600 font-medium" data-tab="pointage">
                                        <i class="fas fa-check-circle mr-2"></i>
                                        Pointage quotidien
                                    </button>
                                    <button class="tab-btn-absences py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="historique-absences">
                                        <i class="fas fa-history mr-2"></i>
                                        Historique
                                    </button>
                                    <button class="tab-btn-absences py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="retards">
                                        <i class="fas fa-clock mr-2"></i>
                                        Gestion des retards
                                    </button>
                                    <button class="tab-btn-absences py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="justifications">
                                        <i class="fas fa-file-alt mr-2"></i>
                                        Justifications
                                    </button>
                                </nav>
                            </div>

                            <!-- Contenu des onglets -->
                            <div class="p-6">
                                <!-- Onglet Pointage quotidien -->
                                <div id="tab-pointage" class="tab-content-absences">
                                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                        <div class="lg:col-span-2">
                                            <div class="stat-card p-6 hover-lift">
                                                <div class="flex items-center justify-between mb-4">
                                                    <h3 class="text-lg font-semibold text-gray-900">Pointage de présence - <span id="datePointage"></span></h3>
                                                    <button class="btn btn-outline hover-lift" id="btnActualiserPointage">
                                                        <i class="fas fa-sync-alt mr-2"></i>
                                                        Actualiser
                                                    </button>
                                                </div>
                                                <div class="mb-4">
                                                    <label class="block text-sm font-medium text-gray-700 mb-2">Filtrer par classe</label>
                                                    <select class="input" id="classePointageSelect">
                                                        <option value="">Toutes les classes</option>
                                                        <option value="6A">6ème A</option>
                                                        <option value="5B">5ème B</option>
                                                        <option value="4C">4ème C</option>
                                                        <option value="3A">3ème A</option>
                                                    </select>
                                                </div>
                                                <div class="table-container max-h-96 overflow-y-auto">
                                                    <table class="table w-full">
                                                        <thead>
                                                            <tr>
                                                                <th class="px-4 py-3">Élève</th>
                                                                <th class="px-4 py-3">Classe</th>
                                                                <th class="px-4 py-3">Statut</th>
                                                                <th class="px-4 py-3">Heure d'arrivée</th>
                                                                <th class="px-4 py-3">Actions</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="tableauPointage">
                                                            <!-- Rempli dynamiquement -->
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="stat-card p-6 hover-lift">
                                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Actions rapides</h3>
                                                <div class="space-y-3">
                                                    <button class="btn btn-primary w-full hover-lift" data-action="pointer-tous-present">
                                                        <i class="fas fa-users mr-2"></i>
                                                        Tous présents
                                                    </button>
                                                    <button class="btn btn-success w-full hover-lift" data-action="generer-rapport-jour">
                                                        <i class="fas fa-file-excel mr-2"></i>
                                                        Rapport journalier
                                                    </button>
                                                    <button class="btn btn-outline w-full hover-lift" data-action="envoyer-alertes">
                                                        <i class="fas fa-bell mr-2"></i>
                                                        Envoyer alertes
                                                    </button>
                                                </div>
                                                <div class="mt-6">
                                                    <h4 class="font-medium text-gray-900 mb-2">Statistiques du jour</h4>
                                                    <div class="space-y-2 text-sm" id="statsJour">
                                                        <!-- Rempli dynamiquement -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Historique -->
                                <div id="tab-historique-absences" class="tab-content-absences hidden">
                                    <div class="stat-card p-6 hover-lift">
                                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Historique des absences</h3>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Période</label>
                                                <select class="input" id="periodeHistoriqueSelect">
                                                    <option value="7">7 derniers jours</option>
                                                    <option value="30">30 derniers jours</option>
                                                    <option value="90">Trimestre en cours</option>
                                                    <option value="custom">Personnalisée</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Élève/Classe</label>
                                                <select class="input" id="filtreHistoriqueSelect">
                                                    <option value="">Tous les élèves</option>
                                                    <option value="6A">Classe 6ème A</option>
                                                    <option value="5B">Classe 5ème B</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="table-container max-h-96 overflow-y-auto">
                                            <table class="table w-full">
                                                <thead>
                                                    <tr>
                                                        <th class="px-4 py-3">Date</th>
                                                        <th class="px-4 py-3">Élève</th>
                                                        <th class="px-4 py-3">Classe</th>
                                                        <th class="px-4 py-3">Type</th>
                                                        <th class="px-4 py-3">Justifié</th>
                                                        <th class="px-4 py-3">Motif</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tableauHistoriqueAbsences">
                                                    <!-- Rempli dynamiquement -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Retards -->
                                <div id="tab-retards" class="tab-content-absences hidden">
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                        <div class="stat-card p-6 hover-lift">
                                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Gestion des retards</h3>
                                            <div class="mb-4">
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Date</label>
                                                <input type="date" class="input" id="dateRetards" value="<?php echo date('Y-m-d'); ?>">
                                            </div>
                                            <div class="table-container max-h-64 overflow-y-auto">
                                                <table class="table w-full">
                                                    <thead>
                                                        <tr>
                                                            <th class="px-4 py-3">Élève</th>
                                                            <th class="px-4 py-3">Heure</th>
                                                            <th class="px-4 py-3">Retard (min)</th>
                                                            <th class="px-4 py-3">Actions</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="tableauRetards">
                                                        <!-- Rempli dynamiquement -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="stat-card p-6 hover-lift">
                                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Statistiques des retards</h3>
                                            <canvas id="retardsChart" height="200"></canvas>
                                            <div class="mt-4 space-y-2">
                                                <div class="flex justify-between">
                                                    <span class="text-sm text-gray-600">Retard moyen:</span>
                                                    <span class="font-medium" id="retardMoyen">12 min</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span class="text-sm text-gray-600">Élève le plus en retard:</span>
                                                    <span class="font-medium" id="elevePlusRetard">Jean K.</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Justifications -->
                                <div id="tab-justifications" class="tab-content-absences hidden">
                                    <div class="stat-card p-6 hover-lift">
                                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Justifications d'absences</h3>
                                        <div class="mb-4 flex gap-3">
                                            <button class="btn btn-outline hover-lift" data-action="toutes-justifications">
                                                Toutes
                                            </button>
                                            <button class="btn btn-warning hover-lift" data-action="justifications-en-attente">
                                                En attente
                                            </button>
                                            <button class="btn btn-success hover-lift" data-action="justifications-validees">
                                                Validées
                                            </button>
                                            <button class="btn btn-danger hover-lift" data-action="justifications-rejetees">
                                                Rejetées
                                            </button>
                                        </div>
                                        <div class="table-container max-h-96 overflow-y-auto">
                                            <table class="table w-full">
                                                <thead>
                                                    <tr>
                                                        <th class="px-4 py-3">Élève</th>
                                                        <th class="px-4 py-3">Date absence</th>
                                                        <th class="px-4 py-3">Motif</th>
                                                        <th class="px-4 py-3">Pièce jointe</th>
                                                        <th class="px-4 py-3">Statut</th>
                                                        <th class="px-4 py-3">Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tableauJustifications">
                                                    <!-- Rempli dynamiquement -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Page Emploi du temps (COMPLÉTÉE) -->
                <section id="page-emploi-du-temps" class="page hidden">
                    <div class="space-y-6">
                        <!-- Statistiques -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Cours aujourd'hui</p>
                                        <p class="text-3xl font-bold text-blue-600 mt-1" id="coursAujourdhui">14</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-blue-100 text-blue-600 shadow-lg">
                                        <i class="fas fa-calendar-day text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Classes actives</p>
                                        <p class="text-3xl font-bold text-green-600 mt-1" id="classesActiveEDT">8</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-green-100 text-green-600 shadow-lg">
                                        <i class="fas fa-door-open text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Heures enseignées/semaine</p>
                                        <p class="text-3xl font-bold text-purple-600 mt-1" id="heuresEnseignees">240</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-purple-100 text-purple-600 shadow-lg">
                                        <i class="fas fa-clock text-xl"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Contrôles et actions -->
                        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-900">Emploi du temps</h2>
                                <p class="text-gray-600 mt-2">Planifiez et gérez les horaires de cours pour toutes les classes</p>
                            </div>
                            <div class="flex gap-3">
                                <button class="btn btn-outline hover-lift" data-action="exporter-edt">
                                    <i class="fas fa-download mr-2"></i>
                                    Exporter EDT
                                </button>
                                <button class="btn btn-primary hover-lift" data-action="generer-edt">
                                    <i class="fas fa-calendar-plus mr-2"></i>
                                    Générer EDT
                                </button>
                                <button class="btn btn-success hover-lift" data-action="ajouter-cours">
                                    <i class="fas fa-plus-circle mr-2"></i>
                                    Ajouter un cours
                                </button>
                            </div>
                        </div>

                        <!-- Navigation par onglets -->
                        <div class="bg-white/80 backdrop-blur-lg rounded-2xl border border-gray-200/50 overflow-hidden">
                            <div class="border-b border-gray-200/50">
                                <nav class="flex space-x-8 px-6">
                                    <button class="tab-btn-edt py-4 px-2 border-b-2 border-blue-500 text-blue-600 font-medium" data-tab="vue-globale">
                                        <i class="fas fa-calendar-alt mr-2"></i>
                                        Vue globale
                                    </button>
                                    <button class="tab-btn-edt py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="par-classe">
                                        <i class="fas fa-door-open mr-2"></i>
                                        Par classe
                                    </button>
                                    <button class="tab-btn-edt py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="par-enseignant">
                                        <i class="fas fa-chalkboard-teacher mr-2"></i>
                                        Par enseignant
                                    </button>
                                    <button class="tab-btn-edt py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="planification">
                                        <i class="fas fa-edit mr-2"></i>
                                        Planification
                                    </button>
                                </nav>
                            </div>

                            <!-- Contenu des onglets -->
                            <div class="p-6">
                                <!-- Onglet Vue globale -->
                                <div id="tab-vue-globale" class="tab-content-edt">
                                    <div class="stat-card p-6 hover-lift">
                                        <div class="flex items-center justify-between mb-6">
                                            <h3 class="text-lg font-semibold text-gray-900">Emploi du temps global</h3>
                                            <div class="flex gap-2">
                                                <select class="input text-sm" id="semaineEDTSelect">
                                                    <option value="1">Semaine 1</option>
                                                    <option value="2">Semaine 2</option>
                                                    <option value="3">Semaine 3</option>
                                                </select>
                                                <button class="btn btn-outline hover-lift" id="btnAujourdhuiEDT">
                                                    <i class="fas fa-calendar-day mr-2"></i>
                                                    Aujourd'hui
                                                </button>
                                            </div>
                                        </div>
                                        <div class="overflow-x-auto">
                                            <table class="table w-full">
                                                <thead>
                                                    <tr>
                                                        <th class="px-4 py-3">Heure</th>
                                                        <th class="px-4 py-3">Lundi</th>
                                                        <th class="px-4 py-3">Mardi</th>
                                                        <th class="px-4 py-3">Mercredi</th>
                                                        <th class="px-4 py-3">Jeudi</th>
                                                        <th class="px-4 py-3">Vendredi</th>
                                                        <th class="px-4 py-3">Samedi</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="edtGlobal">
                                                    <!-- Rempli dynamiquement -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Par classe -->
                                <div id="tab-par-classe" class="tab-content-edt hidden">
                                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                        <div class="lg:col-span-2">
                                            <div class="stat-card p-6 hover-lift">
                                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Emploi du temps par classe</h3>
                                                <div class="mb-4">
                                                    <label class="block text-sm font-medium text-gray-700 mb-2">Sélectionner une classe</label>
                                                    <select class="input" id="classeEDTSelect">
                                                        <option value="">Choisir une classe</option>
                                                        <option value="6A">6ème A</option>
                                                        <option value="5B">5ème B</option>
                                                        <option value="4C">4ème C</option>
                                                        <option value="3A">3ème A</option>
                                                    </select>
                                                </div>
                                                <div id="edtClasseContainer">
                                                    <p class="text-gray-500 text-center py-8">Sélectionnez une classe pour afficher son emploi du temps</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="stat-card p-6 hover-lift">
                                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Informations de la classe</h3>
                                                <div id="infoClasseEDT">
                                                    <p class="text-gray-500">Aucune classe sélectionnée</p>
                                                </div>
                                            </div>
                                            <div class="stat-card p-6 hover-lift mt-6">
                                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Cours de la semaine</h3>
                                                <div class="space-y-3" id="coursSemaine">
                                                    <!-- Rempli dynamiquement -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Par enseignant -->
                                <div id="tab-par-enseignant" class="tab-content-edt hidden">
                                    <div class="stat-card p-6 hover-lift">
                                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Emploi du temps par enseignant</h3>
                                        <div class="mb-4">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Sélectionner un enseignant</label>
                                            <select class="input" id="enseignantEDTSelect">
                                                <option value="">Choisir un enseignant</option>
                                            </select>
                                        </div>
                                        <div class="overflow-x-auto">
                                            <table class="table w-full" id="edtEnseignant">
                                                <!-- Rempli dynamiquement -->
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Planification -->
                                <div id="tab-planification" class="tab-content-edt hidden">
                                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                        <div class="lg:col-span-2">
                                            <div class="stat-card p-6 hover-lift">
                                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Planifier un nouveau cours</h3>
                                                <form id="planificationCoursForm" class="space-y-4">
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                        <div>
                                                            <label class="block text-sm font-medium text-gray-700 mb-2">Classe</label>
                                                            <select class="input" id="classePlanificationSelect" required>
                                                                <option value="">Sélectionner une classe</option>
                                                            </select>
                                                        </div>
                                                        <div>
                                                            <label class="block text-sm font-medium text-gray-700 mb-2">Matière</label>
                                                            <select class="input" id="matierePlanificationSelect" required>
                                                                <option value="">Sélectionner une matière</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                        <div>
                                                            <label class="block text-sm font-medium text-gray-700 mb-2">Enseignant</label>
                                                            <select class="input" id="enseignantPlanificationSelect" required>
                                                                <option value="">Sélectionner un enseignant</option>
                                                            </select>
                                                        </div>
                                                        <div>
                                                            <label class="block text-sm font-medium text-gray-700 mb-2">Salle</label>
                                                            <input type="text" class="input" id="sallePlanification" placeholder="Salle 101" required>
                                                        </div>
                                                    </div>
                                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                                        <div>
                                                            <label class="block text-sm font-medium text-gray-700 mb-2">Jour</label>
                                                            <select class="input" id="jourPlanificationSelect" required>
                                                                <option value="1">Lundi</option>
                                                                <option value="2">Mardi</option>
                                                                <option value="3">Mercredi</option>
                                                                <option value="4">Jeudi</option>
                                                                <option value="5">Vendredi</option>
                                                                <option value="6">Samedi</option>
                                                            </select>
                                                        </div>
                                                        <div>
                                                            <label class="block text-sm font-medium text-gray-700 mb-2">Heure début</label>
                                                            <input type="time" class="input" id="heureDebutPlanification" required>
                                                        </div>
                                                        <div>
                                                            <label class="block text-sm font-medium text-gray-700 mb-2">Heure fin</label>
                                                            <input type="time" class="input" id="heureFinPlanification" required>
                                                        </div>
                                                    </div>
                                                    <div class="flex justify-end gap-3">
                                                        <button type="reset" class="btn btn-outline hover-lift">Annuler</button>
                                                        <button type="submit" class="btn btn-primary hover-lift">
                                                            <i class="fas fa-save mr-2"></i>
                                                            Planifier le cours
                                                        </button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="stat-card p-6 hover-lift">
                                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Salles disponibles</h3>
                                                <div class="space-y-3" id="sallesDisponibles">
                                                    <!-- Rempli dynamiquement -->
                                                </div>
                                            </div>
                                            <div class="stat-card p-6 hover-lift mt-6">
                                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Conflits détectés</h3>
                                                <div class="space-y-2" id="conflitsPlanification">
                                                    <p class="text-green-600 text-sm">✓ Aucun conflit détecté</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Page Messagerie (COMPLÉTÉE) -->
                <section id="page-messagerie" class="page hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                        <!-- Liste des conversations -->
                        <div class="lg:col-span-1">
                            <div class="stat-card p-6 hover-lift h-full">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-lg font-semibold text-gray-900">Conversations</h3>
                                    <button class="btn btn-primary hover-lift" data-action="nouveau-message">
                                        <i class="fas fa-plus mr-2"></i>
                                        Nouveau
                                    </button>
                                </div>
                                <div class="space-y-3 max-h-[500px] overflow-y-auto">
                                    <div class="p-3 rounded-lg bg-blue-50 border border-blue-200 cursor-pointer hover:bg-blue-100 transition-colors">
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-200 to-green-200 flex items-center justify-center text-blue-800 font-semibold">
                                                <i class="fas fa-users"></i>
                                            </div>
                                            <div class="flex-1">
                                                <div class="font-medium text-gray-900">Parents 6ème A</div>
                                                <div class="text-sm text-gray-500">Réunion parents-professeurs...</div>
                                            </div>
                                            <span class="text-xs text-gray-400">14:30</span>
                                        </div>
                                    </div>
                                    <!-- Plus de conversations -->
                                </div>
                            </div>
                        </div>

                        <!-- Zone de conversation principale -->
                        <div class="lg:col-span-3">
                            <div class="stat-card p-6 hover-lift h-full">
                                <div class="flex items-center justify-between mb-6">
                                    <div class="flex items-center gap-3">
                                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-blue-200 to-purple-200 flex items-center justify-center text-blue-800 font-semibold">
                                            <i class="fas fa-users text-xl"></i>
                                        </div>
                                        <div>
                                            <h3 class="text-lg font-semibold text-gray-900">Parents 6ème A</h3>
                                            <p class="text-sm text-gray-500">Groupe de discussion avec les parents</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors">
                                            <i class="fas fa-phone"></i>
                                        </button>
                                        <button class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors">
                                            <i class="fas fa-video"></i>
                                        </button>
                                        <button class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                    </div>
                                </div>

                                <!-- Messages -->
                                <div class="space-y-4 mb-6 max-h-[400px] overflow-y-auto p-4">
                                    <div class="message-bubble message-received">
                                        <div class="font-medium mb-1">Mme Traoré (parent)</div>
                                        <div>Bonjour, pourriez-vous me donner les dates des prochains contrôles ?</div>
                                        <div class="text-xs text-gray-500 mt-1 text-right">10:15 AM</div>
                                    </div>
                                    <div class="message-bubble message-sent">
                                        <div class="font-medium mb-1">Vous</div>
                                        <div>Bonjour Mme Traoré, les contrôles de mathématiques sont prévus pour le 15 janvier.</div>
                                        <div class="text-xs text-gray-500 mt-1 text-right">10:18 AM</div>
                                    </div>
                                </div>

                                <!-- Zone de saisie -->
                                <div class="border-t border-gray-200 pt-4">
                                    <form id="formMessage" class="space-y-3">
                                        <div class="flex gap-3">
                                            <input type="text" class="input flex-1" placeholder="Tapez votre message..." id="inputMessage">
                                            <button type="button" class="p-3 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors">
                                                <i class="fas fa-paperclip"></i>
                                            </button>
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-paper-plane"></i>
                                            </button>
                                        </div>
                                        <div class="flex gap-2">
                                            <button type="button" class="text-xs text-gray-500 hover:text-gray-700 hover:bg-gray-100 px-2 py-1 rounded">
                                                <i class="fas fa-smile mr-1"></i>Émoji
                                            </button>
                                            <button type="button" class="text-xs text-gray-500 hover:text-gray-700 hover:bg-gray-100 px-2 py-1 rounded">
                                                <i class="fas fa-image mr-1"></i>Image
                                            </button>
                                            <button type="button" class="text-xs text-gray-500 hover:text-gray-700 hover:bg-gray-100 px-2 py-1 rounded">
                                                <i class="fas fa-file-pdf mr-1"></i>Document
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Page Gestion financière (COMPLÉTÉE) -->
                <section id="page-finances" class="page hidden">
                    <div class="space-y-6">
                        <!-- Statistiques -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Recettes du mois</p>
                                        <p class="text-3xl font-bold text-green-600 mt-1" id="recettesMois">2.450.000 FCFA</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-green-100 text-green-600 shadow-lg">
                                        <i class="fas fa-money-bill-wave text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Dépenses du mois</p>
                                        <p class="text-3xl font-bold text-red-600 mt-1" id="depensesMois">1.850.000 FCFA</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-red-100 text-red-600 shadow-lg">
                                        <i class="fas fa-shopping-cart text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Solde actuel</p>
                                        <p class="text-3xl font-bold text-blue-600 mt-1" id="soldeActuel">600.000 FCFA</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-blue-100 text-blue-600 shadow-lg">
                                        <i class="fas fa-wallet text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stat-card p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Frais impayés</p>
                                        <p class="text-3xl font-bold text-amber-600 mt-1" id="fraisImpayes">450.000 FCFA</p>
                                    </div>
                                    <div class="p-3 rounded-full bg-amber-100 text-amber-600 shadow-lg">
                                        <i class="fas fa-exclamation-triangle text-xl"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Contrôles et actions -->
                        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-900">Gestion financière</h2>
                                <p class="text-gray-600 mt-2">Gérez les finances de l'établissement, les frais scolaires et les budgets</p>
                            </div>
                            <div class="flex gap-3">
                                <button class="btn btn-outline hover-lift" data-action="exporter-finances">
                                    <i class="fas fa-download mr-2"></i>
                                    Exporter rapport
                                </button>
                                <button class="btn btn-primary hover-lift" data-action="nouvelle-recette">
                                    <i class="fas fa-plus mr-2"></i>
                                    Nouvelle recette
                                </button>
                                <button class="btn btn-success hover-lift" data-action="nouvelle-depense">
                                    <i class="fas fa-minus mr-2"></i>
                                    Nouvelle dépense
                                </button>
                            </div>
                        </div>

                        <!-- Navigation par onglets -->
                        <div class="bg-white/80 backdrop-blur-lg rounded-2xl border border-gray-200/50 overflow-hidden">
                            <div class="border-b border-gray-200/50">
                                <nav class="flex space-x-8 px-6">
                                    <button class="tab-btn-finances py-4 px-2 border-b-2 border-blue-500 text-blue-600 font-medium" data-tab="tableau-bord-finances">
                                        <i class="fas fa-chart-pie mr-2"></i>
                                        Tableau de bord
                                    </button>
                                    <button class="tab-btn-finances py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="frais-scolaires">
                                        <i class="fas fa-graduation-cap mr-2"></i>
                                        Frais scolaires
                                    </button>
                                    <button class="tab-btn-finances py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="facturation">
                                        <i class="fas fa-file-invoice-dollar mr-2"></i>
                                        Facturation
                                    </button>
                                    <button class="tab-btn-finances py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="budget">
                                        <i class="fas fa-chart-line mr-2"></i>
                                        Budget
                                    </button>
                                </nav>
                            </div>

                            <!-- Contenu des onglets -->
                            <div class="p-6">
                                <!-- Onglet Tableau de bord -->
                                <div id="tab-tableau-bord-finances" class="tab-content-finances">
                                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                        <div class="lg:col-span-2">
                                            <div class="stat-card p-6 hover-lift">
                                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Évolution financière</h3>
                                                <canvas id="evolutionFinanciereChart" height="250"></canvas>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="stat-card p-6 hover-lift">
                                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Répartition des dépenses</h3>
                                                <canvas id="repartitionDepensesChart" height="200"></canvas>
                                            </div>
                                            <div class="stat-card p-6 hover-lift mt-6">
                                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Alertes financières</h3>
                                                <div class="space-y-3" id="alertesFinancieres">
                                                    <!-- Rempli dynamiquement -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Frais scolaires -->
                                <div id="tab-frais-scolaires" class="tab-content-finances hidden">
                                    <div class="stat-card p-6 hover-lift">
                                        <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
                                            <h3 class="text-lg font-semibold text-gray-900">Gestion des frais scolaires</h3>
                                            <button class="btn btn-primary hover-lift mt-2 md:mt-0" data-action="configurer-frais">
                                                <i class="fas fa-cog mr-2"></i>
                                                Configurer les frais
                                            </button>
                                        </div>
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                                            <div class="stat-card p-4 hover-lift">
                                                <h4 class="font-medium text-gray-900 mb-2">Inscription</h4>
                                                <p class="text-2xl font-bold text-blue-600">25.000 FCFA</p>
                                                <p class="text-sm text-gray-500 mt-1">Frais annuels</p>
                                            </div>
                                            <div class="stat-card p-4 hover-lift">
                                                <h4 class="font-medium text-gray-900 mb-2">Scolarité</h4>
                                                <p class="text-2xl font-bold text-green-600">150.000 FCFA</p>
                                                <p class="text-sm text-gray-500 mt-1">Par trimestre</p>
                                            </div>
                                            <div class="stat-card p-4 hover-lift">
                                                <h4 class="font-medium text-gray-900 mb-2">Divers</h4>
                                                <p class="text-2xl font-bold text-purple-600">15.000 FCFA</p>
                                                <p class="text-sm text-gray-500 mt-1">Frais annexes</p>
                                            </div>
                                        </div>
                                        <div class="table-container max-h-96 overflow-y-auto">
                                            <table class="table w-full">
                                                <thead>
                                                    <tr>
                                                        <th class="px-4 py-3">Élève</th>
                                                        <th class="px-4 py-3">Classe</th>
                                                        <th class="px-4 py-3">Total dû</th>
                                                        <th class="px-4 py-3">Payé</th>
                                                        <th class="px-4 py-3">Reste</th>
                                                        <th class="px-4 py-3">Statut</th>
                                                        <th class="px-4 py-3">Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tableauFraisScolaires">
                                                    <!-- Rempli dynamiquement -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Facturation -->
                                <div id="tab-facturation" class="tab-content-finances hidden">
                                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                        <div class="lg:col-span-2">
                                            <div class="stat-card p-6 hover-lift">
                                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Créer une facture</h3>
                                                <form id="creationFactureForm" class="space-y-4">
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                        <div>
                                                            <label class="block text-sm font-medium text-gray-700 mb-2">Destinataire</label>
                                                            <select class="input" id="destinataireFactureSelect" required>
                                                                <option value="">Sélectionner un élève/parent</option>
                                                            </select>
                                                        </div>
                                                        <div>
                                                            <label class="block text-sm font-medium text-gray-700 mb-2">Type de facture</label>
                                                            <select class="input" id="typeFactureSelect" required>
                                                                <option value="scolarite">Scolarité</option>
                                                                <option value="inscription">Inscription</option>
                                                                <option value="divers">Frais divers</option>
                                                                <option value="autre">Autre</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                                                        <textarea class="input h-20" id="descriptionFacture" placeholder="Détails de la facture"></textarea>
                                                    </div>
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 mb-2">Montant</label>
                                                        <input type="number" class="input" id="montantFacture" placeholder="0" required>
                                                    </div>
                                                    <div class="flex justify-end gap-3">
                                                        <button type="reset" class="btn btn-outline hover-lift">Annuler</button>
                                                        <button type="submit" class="btn btn-primary hover-lift">
                                                            <i class="fas fa-file-invoice mr-2"></i>
                                                            Générer la facture
                                                        </button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="stat-card p-6 hover-lift">
                                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Factures récentes</h3>
                                                <div class="space-y-3 max-h-96 overflow-y-auto" id="facturesRecentes">
                                                    <!-- Rempli dynamiquement -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Budget -->
                                <div id="tab-budget" class="tab-content-finances hidden">
                                    <div class="stat-card p-6 hover-lift">
                                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Gestion du budget</h3>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <div>
                                                <h4 class="font-medium text-gray-900 mb-3">Budget annuel 2024</h4>
                                                <div class="space-y-3">
                                                    <div class="flex justify-between items-center">
                                                        <span class="text-sm text-gray-600">Budget alloué</span>
                                                        <span class="font-medium">12.500.000 FCFA</span>
                                                    </div>
                                                    <div class="flex justify-between items-center">
                                                        <span class="text-sm text-gray-600">Dépenses réalisées</span>
                                                        <span class="font-medium text-red-600">8.750.000 FCFA</span>
                                                    </div>
                                                    <div class="flex justify-between items-center">
                                                        <span class="text-sm text-gray-600">Reste disponible</span>
                                                        <span class="font-medium text-green-600">3.750.000 FCFA</span>
                                                    </div>
                                                    <div class="mt-4">
                                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                                            <div class="bg-blue-600 h-2 rounded-full" style="width: 70%"></div>
                                                        </div>
                                                        <div class="text-xs text-gray-500 mt-1">70% du budget utilisé</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <h4 class="font-medium text-gray-900 mb-3">Catégories budgétaires</h4>
                                                <div class="space-y-2" id="categoriesBudget">
                                                    <!-- Rempli dynamiquement -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Page Paramètres (COMPLÉTÉE) -->
                <section id="page-parametres" class="page hidden">
                    <div class="space-y-6">
                        <!-- En-tête -->
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900">Paramètres du système</h2>
                            <p class="text-gray-600 mt-2">Configurez les préférences, sécurité et paramètres de l'établissement</p>
                        </div>

                        <!-- Navigation par onglets -->
                        <div class="bg-white/80 backdrop-blur-lg rounded-2xl border border-gray-200/50 overflow-hidden">
                            <div class="border-b border-gray-200/50">
                                <nav class="flex space-x-8 px-6">
                                    <button class="tab-btn-parametres py-4 px-2 border-b-2 border-blue-500 text-blue-600 font-medium" data-tab="general">
                                        <i class="fas fa-cog mr-2"></i>
                                        Général
                                    </button>
                                    <button class="tab-btn-parametres py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="securite">
                                        <i class="fas fa-shield-alt mr-2"></i>
                                        Sécurité
                                    </button>
                                    <button class="tab-btn-parametres py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="notifications">
                                        <i class="fas fa-bell mr-2"></i>
                                        Notifications
                                    </button>
                                    <button class="tab-btn-parametres py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="utilisateurs">
                                        <i class="fas fa-users mr-2"></i>
                                        Utilisateurs
                                    </button>
                                    <button class="tab-btn-parametres py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium" data-tab="sauvegarde">
                                        <i class="fas fa-database mr-2"></i>
                                        Sauvegarde
                                    </button>
                                </nav>
                            </div>

                            <!-- Contenu des onglets -->
                            <div class="p-6">
                                <!-- Onglet Général -->
                                <div id="tab-general" class="tab-content-parametres">
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                        <div class="stat-card p-6 hover-lift">
                                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Informations de l'établissement</h3>
                                            <form id="formInfosEtablissement" class="space-y-4">
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 mb-2">Nom de l'établissement</label>
                                                    <input type="text" class="input" value="Collège le Bachelier de Port-Bouët">
                                                </div>
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 mb-2">Adresse</label>
                                                    <textarea class="input h-20">Port-Bouët, Abidjan, Côte d'Ivoire</textarea>
                                                </div>
                                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 mb-2">Téléphone</label>
                                                        <input type="tel" class="input" value="+225 27 21 00 00 00">
                                                    </div>
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                                        <input type="email" class="input" value="contact@bachelier-portbouet.ci">
                                                    </div>
                                                </div>
                                                <div class="flex justify-end">
                                                    <button type="submit" class="btn btn-primary hover-lift">
                                                        <i class="fas fa-save mr-2"></i>
                                                        Enregistrer
                                                    </button>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="stat-card p-6 hover-lift">
                                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Paramètres académiques</h3>
                                            <form id="formParametresAcademiques" class="space-y-4">
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 mb-2">Année scolaire</label>
                                                    <input type="text" class="input" value="2024-2025">
                                                </div>
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 mb-2">Nombre de trimestres</label>
                                                    <select class="input">
                                                        <option value="3" selected>3 trimestres</option>
                                                        <option value="2">2 semestres</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 mb-2">Heure début des cours</label>
                                                    <input type="time" class="input" value="08:00">
                                                </div>
                                                <div>
                                                    <label class="block text-sm font-medium text-gray-700 mb-2">Heure fin des cours</label>
                                                    <input type="time" class="input" value="16:00">
                                                </div>
                                                <div class="flex justify-end">
                                                    <button type="submit" class="btn btn-primary hover-lift">
                                                        <i class="fas fa-save mr-2"></i>
                                                        Enregistrer
                                                    </button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Sécurité -->
                                <div id="tab-securite" class="tab-content-parametres hidden">
                                    <div class="stat-card p-6 hover-lift">
                                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Paramètres de sécurité</h3>
                                        <div class="space-y-6">
                                            <div>
                                                <h4 class="font-medium text-gray-900 mb-3">Changer le mot de passe</h4>
                                                <form id="formChangerMotDePasse" class="space-y-4 max-w-md">
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 mb-2">Mot de passe actuel</label>
                                                        <input type="password" class="input" required>
                                                    </div>
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 mb-2">Nouveau mot de passe</label>
                                                        <input type="password" class="input" required>
                                                    </div>
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-700 mb-2">Confirmer le nouveau mot de passe</label>
                                                        <input type="password" class="input" required>
                                                    </div>
                                                    <div class="flex justify-end">
                                                        <button type="submit" class="btn btn-primary hover-lift">
                                                            <i class="fas fa-key mr-2"></i>
                                                            Changer le mot de passe
                                                        </button>
                                                    </div>
                                                </form>
                                            </div>
                                            <div>
                                                <h4 class="font-medium text-gray-900 mb-3">Sessions actives</h4>
                                                <div class="table-container">
                                                    <table class="table w-full">
                                                        <thead>
                                                            <tr>
                                                                <th class="px-4 py-3">Appareil</th>
                                                                <th class="px-4 py-3">Dernière activité</th>
                                                                <th class="px-4 py-3">Adresse IP</th>
                                                                <th class="px-4 py-3">Actions</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="sessionsActives">
                                                            <!-- Rempli dynamiquement -->
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Notifications -->
                                <div id="tab-notifications" class="tab-content-parametres hidden">
                                    <div class="stat-card p-6 hover-lift">
                                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Préférences de notifications</h3>
                                        <form id="formPreferencesNotifications" class="space-y-6">
                                            <div>
                                                <h4 class="font-medium text-gray-900 mb-3">Types de notifications</h4>
                                                <div class="space-y-3">
                                                    <div class="flex items-center justify-between">
                                                        <div>
                                                            <div class="font-medium text-gray-900">Nouveaux messages</div>
                                                            <div class="text-sm text-gray-500">Recevoir des notifications pour les nouveaux messages</div>
                                                        </div>
                                                        <div class="relative inline-block w-12 h-6">
                                                            <input type="checkbox" class="sr-only" id="notifMessages" checked>
                                                            <label for="notifMessages" class="block w-12 h-6 rounded-full bg-green-500 cursor-pointer"></label>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center justify-between">
                                                        <div>
                                                            <div class="font-medium text-gray-900">Absences importantes</div>
                                                            <div class="text-sm text-gray-500">Alertes pour les absences non justifiées</div>
                                                        </div>
                                                        <div class="relative inline-block w-12 h-6">
                                                            <input type="checkbox" class="sr-only" id="notifAbsences" checked>
                                                            <label for="notifAbsences" class="block w-12 h-6 rounded-full bg-green-500 cursor-pointer"></label>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center justify-between">
                                                        <div>
                                                            <div class="font-medium text-gray-900">Échéances financières</div>
                                                            <div class="text-sm text-gray-500">Rappels pour les paiements en retard</div>
                                                        </div>
                                                        <div class="relative inline-block w-12 h-6">
                                                            <input type="checkbox" class="sr-only" id="notifFinances" checked>
                                                            <label for="notifFinances" class="block w-12 h-6 rounded-full bg-green-500 cursor-pointer"></label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <h4 class="font-medium text-gray-900 mb-3">Méthodes de notification</h4>
                                                <div class="space-y-3">
                                                    <div class="flex items-center gap-3">
                                                        <input type="checkbox" id="notifEmail" class="w-4 h-4 text-blue-600" checked>
                                                        <label for="notifEmail" class="text-sm text-gray-900">Email</label>
                                                    </div>
                                                    <div class="flex items-center gap-3">
                                                        <input type="checkbox" id="notifSMS" class="w-4 h-4 text-blue-600">
                                                        <label for="notifSMS" class="text-sm text-gray-900">SMS</label>
                                                    </div>
                                                    <div class="flex items-center gap-3">
                                                        <input type="checkbox" id="notifPush" class="w-4 h-4 text-blue-600" checked>
                                                        <label for="notifPush" class="text-sm text-gray-900">Notifications push</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="flex justify-end">
                                                <button type="submit" class="btn btn-primary hover-lift">
                                                    <i class="fas fa-save mr-2"></i>
                                                    Enregistrer les préférences
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>

                                <!-- Onglet Utilisateurs -->
                                <div id="tab-utilisateurs" class="tab-content-parametres hidden">
                                    <div class="stat-card p-6 hover-lift">
                                        <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
                                            <h3 class="text-lg font-semibold text-gray-900">Gestion des utilisateurs</h3>
                                            <button class="btn btn-primary hover-lift mt-2 md:mt-0" data-action="nouvel-utilisateur">
                                                <i class="fas fa-user-plus mr-2"></i>
                                                Nouvel utilisateur
                                            </button>
                                        </div>
                                        <div class="table-container max-h-96 overflow-y-auto">
                                            <table class="table w-full">
                                                <thead>
                                                    <tr>
                                                        <th class="px-4 py-3">Utilisateur</th>
                                                        <th class="px-4 py-3">Rôle</th>
                                                        <th class="px-4 py-3">Email</th>
                                                        <th class="px-4 py-3">Dernière connexion</th>
                                                        <th class="px-4 py-3">Statut</th>
                                                        <th class="px-4 py-3">Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tableauUtilisateurs">
                                                    <!-- Rempli dynamiquement -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onglet Sauvegarde -->
                                <div id="tab-sauvegarde" class="tab-content-parametres hidden">
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                        <div class="stat-card p-6 hover-lift">
                                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Sauvegarde des données</h3>
                                            <div class="space-y-4">
                                                <div>
                                                    <h4 class="font-medium text-gray-900 mb-2">Dernière sauvegarde</h4>
                                                    <p class="text-sm text-gray-600">25/12/2024 02:00</p>
                                                </div>
                                                <div>
                                                    <h4 class="font-medium text-gray-900 mb-2">Taille de la base de données</h4>
                                                    <p class="text-sm text-gray-600">245.6 MB</p>
                                                </div>
                                                <div>
                                                    <h4 class="font-medium text-gray-900 mb-2">Fréquence de sauvegarde</h4>
                                                    <select class="input">
                                                        <option value="daily">Quotidienne</option>
                                                        <option value="weekly" selected>Hebdomadaire</option>
                                                        <option value="monthly">Mensuelle</option>
                                                    </select>
                                                </div>
                                                <div class="flex gap-3">
                                                    <button class="btn btn-primary hover-lift flex-1" data-action="sauvegarder-maintenant">
                                                        <i class="fas fa-save mr-2"></i>
                                                        Sauvegarder maintenant
                                                    </button>
                                                    <button class="btn btn-outline hover-lift" data-action="restaurer-sauvegarde">
                                                        <i class="fas fa-undo mr-2"></i>
                                                        Restaurer
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="stat-card p-6 hover-lift">
                                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Sauvegardes disponibles</h3>
                                            <div class="space-y-3 max-h-80 overflow-y-auto">
                                                <!-- Rempli dynamiquement -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Menu mobile amélioré -->
    <div id="mobileMenu" class="mobile-menu fixed inset-0 z-50 bg-white/95 backdrop-blur-lg md:hidden transform transition-transform duration-500">
        <div class="p-6">
            <div class="flex items-center justify-between mb-8">
                <div class="font-bold text-xl text-blue-600">ÉcoleNumériqueCI</div>
                <button id="closeMobileMenu" class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                    <i class="fas fa-times text-gray-600"></i>
                </button>
            </div>
            <nav class="space-y-2">
                <a class="nav-item active block p-3" href="#" data-page="dashboard">Tableau de bord</a>
                <a class="nav-item block p-3" href="#" data-page="eleves">Gestion des élèves</a>
                <a class="nav-item block p-3" href="#" data-page="enseignants">Enseignants</a>
                <a class="nav-item block p-3" href="#" data-page="classes">Classes & Matières</a>
                <a class="nav-item block p-3" href="#" data-page="notes">Notes & Évaluations</a>
                <a class="nav-item block p-3" href="#" data-page="absences">Absences</a>
                <a class="nav-item block p-3" href="#" data-page="emploi-du-temps">Emploi du temps</a>
                <a class="nav-item block p-3" href="#" data-page="messagerie">Messagerie</a>
                <a class="nav-item block p-3" href="#" data-page="finances">Finances</a>
                <a class="nav-item block p-3" href="#" data-page="parametres">Paramètres</a>
            </nav>
        </div>
    </div>

    <!-- Modal Élève amélioré -->
    <div id="eleveModal" class="modal-overlay hidden">
        <div class="modal-content w-full max-w-2xl">
            <div class="p-6 border-b border-gray-200/50">
                <h3 class="text-xl font-semibold text-gray-900" id="eleveModalTitle">Nouvel élève</h3>
            </div>
            <form id="eleveForm" class="p-6 space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Nom</label>
                        <input type="text" class="input" id="eleveNom" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Prénom</label>
                        <input type="text" class="input" id="elevePrenom" required>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Date de naissance</label>
                        <input type="date" class="input" id="eleveNaissance">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Lieu de naissance</label>
                        <input type="text" class="input" id="eleveLieuNaissance">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Sexe</label>
                        <select class="input" id="eleveSexe">
                            <option value="">Sélectionner</option>
                            <option value="M">Masculin</option>
                            <option value="F">Féminin</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Classe</label>
                        <select class="input" id="eleveClasse">
                            <option value="">Sélectionner une classe</option>
                            <option value="6ème A">6ème A</option>
                            <option value="5ème B">5ème B</option>
                            <option value="4ème C">4ème C</option>
                            <option value="3ème A">3ème A</option>
                            <option value="2nde A">2nde A</option>
                            <option value="1ère A">1ère A</option>
                            <option value="Tle A">Terminale A</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Téléphone</label>
                        <input type="tel" class="input" id="eleveTelephone">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" class="input" id="eleveEmail">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Adresse</label>
                    <textarea class="input h-20" id="eleveAdresse"></textarea>
                </div>

                <div class="flex items-center justify-end gap-3 pt-4">
                    <button type="button" class="btn btn-outline hover-lift" data-action="annuler-eleve">Annuler</button>
                    <button type="submit" class="btn btn-primary hover-lift">
                        <i class="fas fa-save mr-2"></i>
                        Enregistrer
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Classe -->
    <div id="classeModal" class="modal-overlay hidden">
        <div class="modal-content w-full max-w-2xl">
            <div class="p-6 border-b border-gray-200/50">
                <h3 class="text-xl font-semibold text-gray-900" id="classeModalTitle">Nouvelle classe</h3>
            </div>
            <form id="classeForm" class="p-6 space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Nom de la classe</label>
                        <input type="text" class="input" id="classeNom" placeholder="Ex: 6ème A" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Niveau</label>
                        <select class="input" id="classeNiveau" required>
                            <option value="">Sélectionner un niveau</option>
                            <option value="6ème">6ème</option>
                            <option value="5ème">5ème</option>
                            <option value="4ème">4ème</option>
                            <option value="3ème">3ème</option>
                            <option value="2nde">Seconde</option>
                            <option value="1ère">Première</option>
                            <option value="Tle">Terminale</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Salle</label>
                        <input type="text" class="input" id="classeSalle" placeholder="Ex: Salle 101">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Capacité maximale</label>
                        <input type="number" class="input" id="classeCapacite" min="1" max="50" value="30">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Professeur principal</label>
                    <select class="input" id="classeProfesseur">
                        <option value="">Sélectionner un professeur</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                    <textarea class="input h-20" id="classeDescription" placeholder="Description optionnelle de la classe"></textarea>
                </div>

                <div class="flex items-center justify-end gap-3 pt-4">
                    <button type="button" class="btn btn-outline hover-lift" data-action="annuler-classe">Annuler</button>
                    <button type="submit" class="btn btn-primary hover-lift">
                        <i class="fas fa-save mr-2"></i>
                        Enregistrer
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Matière -->
    <div id="matiereModal" class="modal-overlay hidden">
        <div class="modal-content w-full max-w-2xl">
            <div class="p-6 border-b border-gray-200/50">
                <h3 class="text-xl font-semibold text-gray-900" id="matiereModalTitle">Nouvelle matière</h3>
            </div>
            <form id="matiereForm" class="p-6 space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Nom de la matière</label>
                        <input type="text" class="input" id="matiereNom" placeholder="Ex: Mathématiques" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Code</label>
                        <input type="text" class="input" id="matiereCode" placeholder="Ex: MATH" required>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Coefficient</label>
                        <input type="number" class="input" id="matiereCoefficient" min="1" max="10" value="4" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Couleur</label>
                        <input type="color" class="input h-12" id="matiereCouleur" value="#3b82f6">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                    <textarea class="input h-20" id="matiereDescription" placeholder="Description de la matière"></textarea>
                </div>

                <div class="flex items-center justify-between pt-4">
                    <div class="flex items-center">
                        <input type="checkbox" id="matiereActive" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2" checked>
                        <label for="matiereActive" class="ml-2 text-sm text-gray-600">Matière active</label>
                    </div>
                    <div class="flex gap-3">
                        <button type="button" class="btn btn-outline hover-lift" data-action="annuler-matiere">Annuler</button>
                        <button type="submit" class="btn btn-primary hover-lift">
                            <i class="fas fa-save mr-2"></i>
                            Enregistrer
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Enseignant -->
    <div id="enseignantModal" class="modal-overlay hidden">
        <div class="modal-content w-full max-w-2xl">
            <div class="p-6 border-b border-gray-200/50">
                <h3 class="text-xl font-semibold text-gray-900" id="enseignantModalTitle">Nouvel enseignant</h3>
            </div>
            <form id="enseignantForm" class="p-6 space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Nom</label>
                        <input type="text" class="input" id="enseignantNom" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Prénom</label>
                        <input type="text" class="input" id="enseignantPrenom" required>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Date de naissance</label>
                        <input type="date" class="input" id="enseignantNaissance">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Lieu de naissance</label>
                        <input type="text" class="input" id="enseignantLieuNaissance">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Sexe</label>
                        <select class="input" id="enseignantSexe">
                            <option value="">Sélectionner</option>
                            <option value="M">Masculin</option>
                            <option value="F">Féminin</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Spécialité</label>
                        <select class="input" id="enseignantSpecialite">
                            <option value="">Sélectionner une spécialité</option>
                            <option value="Mathématiques">Mathématiques</option>
                            <option value="Français">Français</option>
                            <option value="Sciences">Sciences</option>
                            <option value="Histoire-Géographie">Histoire-Géographie</option>
                            <option value="Anglais">Anglais</option>
                            <option value="EPS">EPS</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Téléphone</label>
                        <input type="tel" class="input" id="enseignantTelephone">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" class="input" id="enseignantEmail">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Adresse</label>
                    <textarea class="input h-20" id="enseignantAdresse"></textarea>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Date d'embauche</label>
                        <input type="date" class="input" id="enseignantEmbauche">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Statut</label>
                        <select class="input" id="enseignantStatut">
                            <option value="Actif">Actif</option>
                            <option value="Inactif">Inactif</option>
                            <option value="Congé">En congé</option>
                        </select>
                    </div>
                </div>

                <div class="flex items-center justify-end gap-3 pt-4">
                    <button type="button" class="btn btn-outline hover-lift" data-action="annuler-enseignant">Annuler</button>
                    <button type="submit" class="btn btn-primary hover-lift">
                        <i class="fas fa-save mr-2"></i>
                        Enregistrer
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Notes -->
    <div id="notesModal" class="modal-overlay hidden">
        <div class="modal-content w-full max-w-2xl">
            <div class="p-6 border-b border-gray-200/50">
                <h3 class="text-xl font-semibold text-gray-900">Saisie de notes</h3>
            </div>
            <div class="p-6 space-y-4">
                <!-- Contenu du modal de notes -->
            </div>
        </div>
    </div>

    <!-- Modal Absence -->
    <div id="absenceModal" class="modal-overlay hidden">
        <div class="modal-content w-full max-w-md">
            <div class="p-6 border-b border-gray-200/50">
                <h3 class="text-xl font-semibold text-gray-900">Pointer une absence</h3>
            </div>
            <form id="absenceForm" class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Élève</label>
                    <select class="input" id="eleveAbsenceSelect" required>
                        <option value="">Sélectionner un élève</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Type</label>
                    <select class="input" id="typeAbsenceSelect" required>
                        <option value="absence">Absence</option>
                        <option value="retard">Retard</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Motif</label>
                    <textarea class="input h-20" id="motifAbsence" placeholder="Motif de l'absence"></textarea>
                </div>
                <div class="flex items-center justify-end gap-3 pt-4">
                    <button type="button" class="btn btn-outline hover-lift" data-action="annuler-absence">Annuler</button>
                    <button type="submit" class="btn btn-primary hover-lift">
                        <i class="fas fa-save mr-2"></i>
                        Enregistrer
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // ====== SYSTÈME DE GESTION SCOLAIRE ULTRA DYNAMIQUE ======
        // Version 4.0 - Interface ultra interactive avec animations avancées

        // Configuration de l'application
        const CONFIG = {
            appName: "ÉcoleNumériqueCI",
            version: "4.0.0",
            schoolName: "College le Bachelier de Port-Bouët",
            schoolYear: "2025-2026",
            databaseKey: "ecoleNumeriqueCI_ultra_data",
            validCredentials: {
                admin: { username: "eezoua", password: "eezoua19122005", role: "Administrateur" },
                prof: { username: "Ezoua Raymond", password: "0707924333", role: "Enseignant" },
                secretaire: { username: "Sandrine Ezoua", password: "sandrine123", role: "Secrétaire" }
            }
        };

        // État de l'application avec données enrichies
        let appState = {
            currentUser: null,
            currentPage: 'dashboard',
            isLoading: false,
            isAuthenticated: false,
            rememberMe: false,
            eleves: [],
            enseignants: [],
            classes: [],
            matieres: [],
            notes: [],
            absences: [],
            messages: [],
            notifications: [],
            affectations: [],
            realTimeData: {
                onlineUsers: 0,
                systemPerformance: 98,
                activeSessions: 0
            }
        };

        // Cache des éléments DOM fréquemment utilisés
        const DOMCache = {};
        
        // Fonction pour initialiser le cache DOM de manière sécurisée
        function initializeDOMCache() {
            const elements = {
                loginPage: 'loginPage',
                app: 'app',
                currentTime: 'currentTime',
                notificationsDropdown: 'notificationsDropdown',
                eleveModal: 'eleveModal',
                eleveForm: 'eleveForm',
                elevesTable: 'elevesTable',
                mobileMenu: 'mobileMenu',
                notificationsList: 'notificationsList',
                loadingScreen: 'loadingScreen',
                loadingOverlay: 'loadingOverlay',
                classeModal: 'classeModal',
                classeForm: 'classeForm',
                matiereModal: 'matiereModal',
                matiereForm: 'matiereForm',
                classesTable: 'classesTable',
                matieresTable: 'matieresTable',
                affectationsList: 'affectationsList',
                enseignantsTable: 'enseignantsTable',
                enseignantModal: 'enseignantModal',
                enseignantForm: 'enseignantForm',
                affectationsEnseignantsList: 'affectationsEnseignantsList',
                notesModal: 'notesModal',
                absenceModal: 'absenceModal',
                absenceForm: 'absenceForm'
            };
            
            for (const [key, id] of Object.entries(elements)) {
                DOMCache[key] = document.getElementById(id);
                if (!DOMCache[key]) {
                    console.warn(`Élément DOM non trouvé: ${id}`);
                }
            }
        }

        // Initialisation de l'application
        document.addEventListener('DOMContentLoaded', function() {
            initializeDOMCache();
            checkAuthentication();
            initializeEventListeners();
        });

        // ====== GESTION DE L'AUTHENTIFICATION ======
       function checkAuthentication() {
    // Vérifier d'abord sessionStorage (session active)
    let isAuthenticated = sessionStorage.getItem('isAuthenticated');
    let currentUser = sessionStorage.getItem('currentUser');
    
    // Si sessionStorage vide, vérifier localStorage
    if (!isAuthenticated || !currentUser) {
        isAuthenticated = localStorage.getItem('isAuthenticated');
        currentUser = localStorage.getItem('currentUser');
        
        // Si trouvé dans localStorage, recréer la session
        if (isAuthenticated === 'true' && currentUser) {
            sessionStorage.setItem('isAuthenticated', 'true');
            sessionStorage.setItem('currentUser', currentUser);
        }
    }
    
    if (isAuthenticated === 'true' && currentUser) {
        try {
            appState.currentUser = JSON.parse(currentUser);
            appState.isAuthenticated = true;
            showDashboard();
        } catch (e) {
            console.error('Erreur lors du chargement de l\'utilisateur:', e);
            showLogin();
        }
    } else {
        showLogin();
    }
}

function authenticateUser(username, password, rememberMe){
    let user = null;              }                                                              
    // ... après vérification réussie ...
    
    if (user) {
        appState.isAuthenticated = true;
        appState.currentUser = user;

        // Stocker dans localStorage
        localStorage.setItem('currentUser', JSON.stringify(appState.currentUser));
        localStorage.setItem('isAuthenticated', 'true');
            if (rememberMe) {                                                                                                   
                localStorage.setItem('rememberedUser', JSON.stringify({         
                    username: user.username,    
                    role: user.role
                }));
            }
            showDashboard();
        } else {
            // Afficher la page de connexion
            showLogin();
        }

        function showLogin() {
            if (DOMCache.loginPage) DOMCache.loginPage.classList.remove('hidden');
            if (DOMCache.app) DOMCache.app.classList.add('hidden');
            initializeLoginPage();
        }

        function showDashboard() {
            if (DOMCache.loginPage) DOMCache.loginPage.classList.add('hidden');
            if (DOMCache.app) DOMCache.app.classList.remove('hidden');
            initializeApp();
        }

        function initializeLoginPage() {
            const loginForm = document.getElementById('loginForm');
            const rememberMe = document.getElementById('rememberMe');

            // Vérifier s'il y a des identifiants enregistrés
            const savedUsername = localStorage.getItem('savedUsername');
            const savedPassword = localStorage.getItem('savedPassword');
            
            if (savedUsername && savedPassword) {
                document.getElementById('username').value = savedUsername;
                document.getElementById('password').value = savedPassword;
                rememberMe.checked = true;
            }

            // Gestion de la soumission du formulaire
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                handleLogin();
            });

            // Animation d'entrée pour les champs
            const inputs = document.querySelectorAll('.input');
            inputs.forEach((input, index) => {
                input.style.animation = `slideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) ${index * 0.1}s both`;
            });

            // Gestionnaire de mot de passe oublié
            document.querySelector('a[href="#"]').addEventListener('click', function(e) {
                e.preventDefault();
                Swal.fire({
                    title: 'Mot de passe oublié?',
                    html: `
                        <p class="text-gray-600 mb-4">Contactez l'administrateur système pour réinitialiser votre mot de passe.</p>
                        <div class="bg-blue-50 p-4 rounded-lg text-sm">
                            <p><strong>Administrateur:</strong> ezouaemmanuel07@gmail.com</p>
                            <p><strong>Téléphone:</strong> +225 07 00 59 05 04</p>
                        </div>
                    `,
                    icon: 'info',
                    confirmButtonText: 'Compris'
                });
            });

            // Effets visuels supplémentaires
            document.querySelectorAll('.input').forEach(input => {
                input.addEventListener('focus', function() {
                    this.parentElement.classList.add('transform', 'scale-105');
                });
                
                input.addEventListener('blur', function() {
                    this.parentElement.classList.remove('transform', 'scale-105');
                });
            });
        }

        function handleLogin() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            const loginBtn = document.getElementById('loginBtn');
            const loadingOverlay = document.getElementById('loadingOverlay');

            // Validation basique
            if (!username || !password) {
                showError('Veuillez remplir tous les champs');
                return;
            }

            // Afficher le chargement
            loginBtn.disabled = true;
            loginBtn.innerHTML = '<div class="loading mr-2"></div> Connexion...';
            loadingOverlay.classList.remove('hidden');

            // Simuler un délai de connexion (2 secondes)
            setTimeout(() => {
                authenticateUser(username, password, rememberMe);
            }, 2000);
        }

        function authenticateUser(username, password, rememberMe) {
            const loadingOverlay = document.getElementById('loadingOverlay');
            const loginBtn = document.getElementById('loginBtn');

            // Vérification des identifiants
            let user = null;
            for (const [key, credentials] of Object.entries(CONFIG.validCredentials)) {
                if (credentials.username === username && credentials.password === password) {
                    user = {
                        username: credentials.username,
                        role: credentials.role,
                        fullName: getFullName(credentials.role)
                    };
                    break;
                }
            }

            if (user) {
                // Connexion réussie
                appState.isAuthenticated = true;
                appState.currentUser = user;

                // Sauvegarder si "Se souvenir de moi" es t coché
                if (rememberMe) {
                    localStorage.setItem('rememberedUser', JSON.stringify({
                        username: user.username,
                        role: user.role
                    }));
                } else {
                    localStorage.removeItem('rememberedUser');
                }

                // Stocker les informations de l'utilisateur pour la session
                localStorage.setItem('currentUser', JSON.stringify(appState.currentUser));
            localStorage.setItem('isAuthenticated', 'true');

                // Afficher le succès
                showSuccess('Connexion réussie!').then(() => {
                    // Rediriger vers le tableau de bord
                    showDashboard();
                });

            } else {
                // Échec de la connexion
                loadingOverlay.classList.add('hidden');
                loginBtn.disabled = false;
                loginBtn.innerHTML = '<i class="fas fa-sign-in-alt mr-2"></i> Se connecter';
                showError('Identifiants incorrects. Veuillez réessayer.');
            }
        }

        function getFullName(role) {
            const names = {
                'Administrateur': 'Administrateur Système',
                'Enseignant': 'Professeur Ezoua Raymond',
                'Secrétaire': 'Madame Ezoua Sandrine'
            };
            return names[role] || role;
        }

        function showError(message) {
            Swal.fire({
                title: 'Erreur de connexion',
                text: message,
                icon: 'error',
                confirmButtonText: 'Compris',
                confirmButtonColor: '#ef4444',
                backdrop: 'rgba(0,0,0,0.4)'
            });
        }

        function showSuccess(message) {
            return Swal.fire({
                title: 'Connexion réussie',
                text: message,
                icon: 'success',
                timer: 2000,
                showConfirmButton: false,
                backdrop: 'rgba(0,0,0,0.4)'
            });
        }

        // ====== FONCTIONS D'INITIALISATION AVANCÉES ======
        function initializeApp() {
            simulateLoading();
            setupRealTimeData();
            setupEventListeners();
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);
            setInterval(updateRealTimeData, 5000); // Mise à jour toutes les 5 secondes
        }

        function simulateLoading() {
            let progress = 0;
            const loadingBar = document.getElementById('loadingBar');
            if (!loadingBar || !DOMCache.loadingScreen) return;
            
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    setTimeout(() => {
                        if (DOMCache.loadingScreen) {
                            DOMCache.loadingScreen.style.opacity = '0';
                            setTimeout(() => {
                                if (DOMCache.loadingScreen) {
                                    DOMCache.loadingScreen.style.display = 'none';
                                }
                                loadDemoData();
                            }, 500);
                        }
                    }, 500);
                }
                if (loadingBar) loadingBar.style.width = `${progress}%`;
            }, 200);
        }

        function setupRealTimeData() {
            // Simuler des données en temps réel
            appState.realTimeData = {
                onlineUsers: Math.floor(Math.random() * 50) + 10,
                systemPerformance: 98 + Math.random() * 2,
                activeSessions: Math.floor(Math.random() * 20) + 5
            };
        }

        function updateRealTimeData() {
            // Mettre à jour les données en temps réel de manière aléatoire
            appState.realTimeData.onlineUsers += Math.floor(Math.random() * 3) - 1;
            appState.realTimeData.systemPerformance = 97 + Math.random() * 3;
            appState.realTimeData.activeSessions += Math.floor(Math.random() * 2) - 1;
            
            // Mettre à jour l'interface
            updateDashboardRealTime();
        }

        function updateDashboardRealTime() {
            // Mettre à jour les indicateurs en temps réel
            const performanceElement = document.querySelector('.text-blue-700');
            if (performanceElement) {
                performanceElement.textContent = `Performance: ${appState.realTimeData.systemPerformance.toFixed(1)}%`;
            }
        }

        function initializeEventListeners() {
            // Navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.getAttribute('data-page');
                    if (page) showPage(page);
                });
            });

            // Menu mobile
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            if (mobileMenuBtn && DOMCache.mobileMenu) {
                mobileMenuBtn.addEventListener('click', function() {
                    DOMCache.mobileMenu.classList.add('open');
                });
            }

            const closeMobileMenu = document.getElementById('closeMobileMenu');
            if (closeMobileMenu && DOMCache.mobileMenu) {
                closeMobileMenu.addEventListener('click', function() {
                    DOMCache.mobileMenu.classList.remove('open');
                });
            }

            // Notifications
            const notificationsBtn = document.getElementById('notificationsBtn');
            if (notificationsBtn && DOMCache.notificationsDropdown) {
                notificationsBtn.addEventListener('click', function() {
                    DOMCache.notificationsDropdown.classList.toggle('hidden');
                });
            }

            const markAllAsRead = document.getElementById('markAllAsRead');
            if (markAllAsRead) {
                markAllAsRead.addEventListener('click', function() {
                    markAllNotificationsAsRead();
                });
            }

            // Recherche globale
            const globalSearch = document.getElementById('globalSearch');
            if (globalSearch) {
                globalSearch.addEventListener('input', function() {
                    performGlobalSearch(this.value);
                });
            }

            // Formulaire élève
            if (DOMCache.eleveForm) {
                DOMCache.eleveForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    saveEleve();
                });
            }

            // Formulaire classe
            if (DOMCache.classeForm) {
                DOMCache.classeForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    saveClasse();
                });
            }

            // Formulaire matière
            if (DOMCache.matiereForm) {
                DOMCache.matiereForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    saveMatiere();
                });
            }

            // Formulaire affectation
            const affectationForm = document.getElementById('affectationForm');
            if (affectationForm) {
                affectationForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    saveAffectation();
                });
            }

            // Formulaire enseignant
            if (DOMCache.enseignantForm) {
                DOMCache.enseignantForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    saveEnseignant();
                });
            }

            // Formulaire affectation matière enseignant
            const affectationMatiereForm = document.getElementById('affectationMatiereForm');
            if (affectationMatiereForm) {
                affectationMatiereForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    saveAffectationMatiereEnseignant();
                });
            }

            // Formulaire absence
            if (DOMCache.absenceForm) {
                DOMCache.absenceForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    saveAbsence();
                });
            }

            // Bouton de déconnexion
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function() {
                    Swal.fire({
                        title: 'Déconnexion',
                        text: 'Êtes-vous sûr de vouloir vous déconnecter ?',
                        icon: 'question',
                        showCancelButton: true,
                        confirmButtonText: 'Oui, déconnecter',
                        cancelButtonText: 'Annuler'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            // Déconnexion
                            sessionStorage.removeItem('currentUser');
                            sessionStorage.removeItem('isAuthenticated');
                            appState.isAuthenticated = false;
                            appState.currentUser = null;
                            
                            Swal.fire({
                                title: 'Déconnexion réussie',
                                text: 'Vous avez été déconnecté du système',
                                icon: 'success',
                                timer: 2000,
                                showConfirmButton: false
                            }).then(() => {
                                // Rediriger vers la page de connexion
                                showLogin();
                            });
                        }
                    });
                });
            }

            // Rafraîchir les statistiques
            const refreshStats = document.getElementById('refreshStats');
            if (refreshStats) {
                refreshStats.addEventListener('click', function() {
                    refreshDashboardStats();
                });
            }

            // Générer rapport
            const btnGenererRapport = document.getElementById('btnGenererRapport');
            if (btnGenererRapport) {
                btnGenererRapport.addEventListener('click', function() {
                    generateReport();
                });
            }

            // Actions rapides
            document.querySelectorAll('[data-action]').forEach(button => {
                button.addEventListener('click', function() {
                    const action = this.dataset.action;
                    if (action) handleAction(action);
                });
            });

            // Navigation par onglets pour les classes et matières
            document.querySelectorAll('.tab-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const tab = this.dataset.tab;
                    if (tab) switchTab(tab);
                });
            });

            // Navigation par onglets pour les enseignants
            document.querySelectorAll('.tab-btn-enseignants').forEach(button => {
                button.addEventListener('click', function() {
                    const tab = this.dataset.tab;
                    if (tab) switchTabEnseignants(tab);
                });
            });

            // Navigation par onglets pour les notes
            document.querySelectorAll('.tab-btn-notes').forEach(button => {
                button.addEventListener('click', function() {
                    const tab = this.dataset.tab;
                    if (tab) switchTabNotes(tab);
                });
            });

            // Navigation par onglets pour les absences
            document.querySelectorAll('.tab-btn-absences').forEach(button => {
                button.addEventListener('click', function() {
                    const tab = this.dataset.tab;
                    if (tab) switchTabAbsences(tab);
                });
            });

            // Navigation par onglets pour l'emploi du temps
            document.querySelectorAll('.tab-btn-edt').forEach(button => {
                button.addEventListener('click', function() {
                    const tab = this.dataset.tab;
                    if (tab) switchTabEDT(tab);
                });
            });

            // Navigation par onglets pour les finances
            document.querySelectorAll('.tab-btn-finances').forEach(button => {
                button.addEventListener('click', function() {
                    const tab = this.dataset.tab;
                    if (tab) switchTabFinances(tab);
                });
            });

            // Navigation par onglets pour les paramètres
            document.querySelectorAll('.tab-btn-parametres').forEach(button => {
                button.addEventListener('click', function() {
                    const tab = this.dataset.tab;
                    if (tab) switchTabParametres(tab);
                });
            });

            // Fermer les menus en cliquant à l'extérieur
            document.addEventListener('click', function(e) {
                // Fermer le menu des notifications
                const notificationsBtn = document.getElementById('notificationsBtn');
                if (notificationsBtn && DOMCache.notificationsDropdown) {
                    if (!notificationsBtn.contains(e.target) && 
                        !DOMCache.notificationsDropdown.contains(e.target)) {
                        DOMCache.notificationsDropdown.classList.add('hidden');
                    }
                }
                
                // Fermer les modals
                if (DOMCache.eleveModal && e.target === DOMCache.eleveModal) {
                    closeEleveModal();
                }
                
                if (DOMCache.classeModal && e.target === DOMCache.classeModal) {
                    closeClasseModal();
                }
                
                if (DOMCache.matiereModal && e.target === DOMCache.matiereModal) {
                    closeMatiereModal();
                }
                
                if (DOMCache.enseignantModal && e.target === DOMCache.enseignantModal) {
                    closeEnseignantModal();
                }

                if (DOMCache.notesModal && e.target === DOMCache.notesModal) {
                    closeNotesModal();
                }

                if (DOMCache.absenceModal && e.target === DOMCache.absenceModal) {
                    closeAbsenceModal();
                }
            });
        }

        function updateCurrentTime() {
            if (!DOMCache.currentTime) return;
            const now = new Date();
            const timeString = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
            DOMCache.currentTime.textContent = timeString;
        }

        // ====== GESTION DES ACTIONS ======
        function handleAction(action) {
            switch(action) {
                case 'nouvel-eleve':
                    openEleveModal();
                    break;
                case 'saisir-notes':
                    openNotesModal();
                    break;
                case 'nouveau-message':
                    showPage('messagerie');
                    break;
                case 'exporter-eleves':
                    exportEleves();
                    break;
                case 'annuler-eleve':
                    closeEleveModal();
                    break;
                case 'nouvelle-classe':
                    openClasseModal();
                    break;
                case 'nouvelle-matiere':
                    openMatiereModal();
                    break;
                case 'annuler-classe':
                    closeClasseModal();
                    break;
                case 'annuler-matiere':
                    closeMatiereModal();
                    break;
                case 'exporter-classes':
                    exportClasses();
                    break;
                case 'nouvel-enseignant':
                    openEnseignantModal();
                    break;
                case 'annuler-enseignant':
                    closeEnseignantModal();
                    break;
                case 'exporter-enseignants':
                    exportEnseignants();
                    break;
                case 'affecter-matiere':
                    switchTabEnseignants('matieres-enseignants');
                    break;
                case 'pointer-absence':
                    openAbsenceModal();
                    break;
                case 'pointer-presence':
                    pointerPresence();
                    break;
                case 'annuler-absence':
                    closeAbsenceModal();
                    break;
                case 'creer-evaluation':
                    creerEvaluation();
                    break;
                case 'generer-edt':
                    genererEDT();
                    break;
                case 'ajouter-cours':
                    ajouterCours();
                    break;
                case 'nouvelle-recette':
                    nouvelleRecette();
                    break;
                case 'nouvelle-depense':
                    nouvelleDepense();
                    break;
                case 'sauvegarder-maintenant':
                    sauvegarderMaintenant();
                    break;
                default:
                    console.warn('Action non reconnue:', action);
            }
        }

        function exportEleves() {
            Swal.fire({
                title: 'Exportation en cours',
                text: 'Génération du fichier Excel...',
                icon: 'info',
                timer: 2000,
                showConfirmButton: false
            }).then(() => {
                Swal.fire({
                    title: 'Exportation réussie',
                    text: 'Le fichier Excel a été généré avec succès',
                    icon: 'success',
                    confirmButtonText: 'Télécharger'
                });
            });
        }

        function exportClasses() {
            Swal.fire({
                title: 'Exportation en cours',
                text: 'Génération du rapport des classes...',
                icon: 'info',
                timer: 2000,
                showConfirmButton: false
            }).then(() => {
                Swal.fire({
                    title: 'Exportation réussie',
                    text: 'Le rapport des classes a été généré avec succès',
                    icon: 'success',
                    confirmButtonText: 'Télécharger'
                });
            });
        }

        function exportEnseignants() {
            Swal.fire({
                title: 'Exportation en cours',
                text: 'Génération du rapport des enseignants...',
                icon: 'info',
                timer: 2000,
                showConfirmButton: false
            }).then(() => {
                Swal.fire({
                    title: 'Exportation réussie',
                    text: 'Le rapport des enseignants a été généré avec succès',
                    icon: 'success',
                    confirmButtonText: 'Télécharger'
                });
            });
        }

        // ====== CHARGEMENT DES DONNÉES DE DÉMONSTRATION ======
        function loadDemoData() {
            // Données de démonstration pour les élèves
            appState.eleves = [
                {
                    id: 1,
                    nom: "Kouamé",
                    prenom: "Jean",
                    matricule: "ELEV-2024-001",
                    classe: "6ème A",
                    sexe: "M",
                    telephone: "+225 07 12 34 56 78",
                    email: "jean.kouame@ecole.ci",
                    adresse: "Cocody, Abidjan",
                    statut: "Actif"
                },
                {
                    id: 2,
                    nom: "Traoré",
                    prenom: "Aïcha",
                    matricule: "ELEV-2024-002",
                    classe: "5ème B",
                    sexe: "F",
                    telephone: "+225 05 98 76 54 32",
                    email: "aicha.traore@ecole.ci",
                    adresse: "Yopougon, Abidjan",
                    statut: "Actif"
                }
            ];

            // Données de démonstration pour les enseignants
            appState.enseignants = [
                { 
                    id: 1, 
                    nom: "Kouassi", 
                    prenom: "Paul", 
                    specialite: "Mathématiques", 
                    telephone: "+225 07 11 22 33 44",
                    email: "paul.kouassi@ecole.ci",
                    dateEmbauche: "2020-09-01",
                    statut: "Actif"
                },
                { 
                    id: 2, 
                    nom: "Traoré", 
                    prenom: "Marie", 
                    specialite: "Français", 
                    telephone: "+225 05 55 66 77 88",
                    email: "marie.traore@ecole.ci",
                    dateEmbauche: "2019-09-01",
                    statut: "Actif"
                },
                { 
                    id: 3, 
                    nom: "Koné", 
                    prenom: "David", 
                    specialite: "Sciences", 
                    telephone: "+225 01 99 88 77 66",
                    email: "david.kone@ecole.ci",
                    dateEmbauche: "2021-09-01",
                    statut: "Actif"
                },
                { 
                    id: 4, 
                    nom: "Bamba", 
                    prenom: "Julie", 
                    specialite: "Histoire-Géographie", 
                    telephone: "+225 07 44 33 22 11",
                    email: "julie.bamba@ecole.ci",
                    dateEmbauche: "2018-09-01",
                    statut: "Actif"
                }
            ];

            // Données de démonstration pour les classes
            appState.classes = [
                { id: 1, nom: "6ème A", niveau: "6ème", effectif: 32, professeurPrincipal: "Kouassi Paul", salle: "Salle 101", statut: "Active" },
                { id: 2, nom: "5ème B", niveau: "5ème", effectif: 28, professeurPrincipal: "Kouassi Paul", salle: "Salle 102", statut: "Active" },
                { id: 3, nom: "4ème C", niveau: "4ème", effectif: 30, professeurPrincipal: "Traoré Marie", salle: "Salle 201", statut: "Active" },
                { id: 4, nom: "3ème A", niveau: "3ème", effectif: 35, professeurPrincipal: "Traoré Marie", salle: "Salle 202", statut: "Active" },
                { id: 5, nom: "2nde A", niveau: "2nde", effectif: 40, professeurPrincipal: "Koné David", salle: "Salle 301", statut: "Active" },
                { id: 6, nom: "1ère A", niveau: "1ère", effectif: 38, professeurPrincipal: "Koné David", salle: "Salle 302", statut: "Active" },
                { id: 7, nom: "Tle A", niveau: "Tle", effectif: 42, professeurPrincipal: "Bamba Julie", salle: "Salle 401", statut: "Active" }
            ];

            // Données de démonstration pour les matières
            appState.matieres = [
                { id: 1, nom: "Mathématiques", code: "MATH", coefficient: 4, couleur: "#3b82f6", statut: "Active" },
                { id: 2, nom: "Français", code: "FRAN", coefficient: 3, couleur: "#10b981", statut: "Active" },
                { id: 3, nom: "Sciences", code: "SCIE", coefficient: 3, couleur: "#f59e0b", statut: "Active" },
                { id: 4, nom: "Histoire-Géographie", code: "HIST", coefficient: 2, couleur: "#ef4444", statut: "Active" },
                { id: 5, nom: "Anglais", code: "ANGL", coefficient: 2, couleur: "#8b5cf6", statut: "Active" },
                { id: 6, nom: "EPS", code: "EPS", coefficient: 1, couleur: "#06b6d4", statut: "Active" }
            ];

            // Données de démonstration pour les affectations
            appState.affectations = [
                { id: 1, enseignantId: 1, matiereId: 1, classeId: 1 },
                { id: 2, enseignantId: 1, matiereId: 1, classeId: 2 },
                { id: 3, enseignantId: 2, matiereId: 2, classeId: 3 },
                { id: 4, enseignantId: 2, matiereId: 2, classeId: 4 },
                { id: 5, enseignantId: 3, matiereId: 3, classeId: 5 },
                { id: 6, enseignantId: 3, matiereId: 3, classeId: 6 },
                { id: 7, enseignantId: 4, matiereId: 4, classeId: 7 }
            ];

            // Initialiser les composants de l'interface
            initializeDashboard();
            initializeElevesPage();
            initializeClassesPage();
            initializeEnseignantsPage();
            initializeNotesPage();
            initializeAbsencesPage();
            initializeEDTPage();
            initializeFinancesPage();
            initializeParametresPage();
            initializeNotifications();
            
            // Mettre à jour le nom de l'utilisateur connecté
            if (appState.currentUser) {
                const userName = document.getElementById('userName');
                const userRole = document.getElementById('userRole');
                if (userName) userName.textContent = appState.currentUser.fullName;
                if (userRole) userRole.textContent = appState.currentUser.role;
            }
        }

        // ====== FONCTIONNALITÉS DU TABLEAU DE BORD ======
        function initializeDashboard() {
            updateDashboardStats();
            initializeCharts();
            loadRecentActivities();
            loadUpcomingEvents();
        }

        function updateDashboardStats() {
            // Calculer les statistiques
            const totalEleves = appState.eleves ? appState.eleves.length : 0;
            const filles = appState.eleves ? appState.eleves.filter(e => e.sexe === 'F').length : 0;
            const pourcentageFilles = totalEleves > 0 ? Math.round((filles / totalEleves) * 100) : 0;
            
            // Simuler les présences (80-95% de présence)
            const tauxPresence = 85 + Math.floor(Math.random() * 11);
            const presentsAujourdhui = Math.round((tauxPresence / 100) * totalEleves);
            
            // Simuler la moyenne générale (10-18)
            const moyenneGenerale = (12 + Math.random() * 4).toFixed(1);
            
            // Mettre à jour l'interface avec vérifications
            const statEffectif = document.getElementById('statEffectif');
            if (statEffectif) statEffectif.textContent = totalEleves;
            
            const statFilles = document.getElementById('statFilles');
            if (statFilles) statFilles.textContent = `${filles} (${pourcentageFilles}%)`;
            
            const statFillesProgress = document.getElementById('statFillesProgress');
            if (statFillesProgress) statFillesProgress.style.width = `${pourcentageFilles}%`;
            
            const statPresence = document.getElementById('statPresence');
            if (statPresence) statPresence.textContent = `${tauxPresence}%`;
            
            const statPresents = document.getElementById('statPresents');
            if (statPresents) statPresents.textContent = `${presentsAujourdhui}/${totalEleves}`;
            
            const statPresenceProgress = document.getElementById('statPresenceProgress');
            if (statPresenceProgress) statPresenceProgress.style.width = `${tauxPresence}%`;
            
            const statMoyenne = document.getElementById('statMoyenne');
            if (statMoyenne) statMoyenne.textContent = moyenneGenerale;
            
            const statEvolution = document.getElementById('statEvolution');
            if (statEvolution) statEvolution.textContent = "+2.3%";
            
            const statMoyenneProgress = document.getElementById('statMoyenneProgress');
            if (statMoyenneProgress) statMoyenneProgress.style.width = `${(moyenneGenerale / 20) * 100}%`;
            
            const statEnseignants = document.getElementById('statEnseignants');
            if (statEnseignants) statEnseignants.textContent = appState.enseignants ? appState.enseignants.length : 0;
            
            const statMatieres = document.getElementById('statMatieres');
            if (statMatieres) statMatieres.textContent = appState.matieres ? appState.matieres.length : 0;
            
            const statEnseignantsProgress = document.getElementById('statEnseignantsProgress');
            if (statEnseignantsProgress) statEnseignantsProgress.style.width = "100%";
            
            // Mettre à jour les alertes
            updateDashboardAlerts();
        }

        function updateDashboardAlerts() {
            const alertsElement = document.getElementById('dashboardAlerts');
            if (!alertsElement) return;
            
            const alerts = [];
            
            // Vérifier les absences non justifiées
            if (appState.absences) {
                const absencesNonJustifiees = appState.absences.filter(a => !a.justifiee).length;
                if (absencesNonJustifiees > 0) {
                    alerts.push(`${absencesNonJustifiees} absence(s) non justifiée(s) aujourd'hui`);
                }
            }
            
            // Vérifier les messages non lus
            if (appState.messages) {
                const messagesNonLus = appState.messages.filter(m => !m.lu).length;
                if (messagesNonLus > 0) {
                    alerts.push(`${messagesNonLus} message(s) non lu(s)`);
                }
            }
            
            // Vérifier les notes manquantes
            if (appState.eleves && appState.notes) {
                const elevesSansNotes = appState.eleves.filter(e => {
                    return !appState.notes.some(n => n.eleveId === e.id);
                }).length;
                
                if (elevesSansNotes > 0) {
                    alerts.push(`${elevesSansNotes} élève(s) sans notes enregistrées`);
                }
            }
            
            // Afficher les alertes ou un message par défaut
            if (alerts.length > 0) {
                alertsElement.textContent = alerts.join(' • ');
            } else {
                alertsElement.textContent = "Aucune alerte critique - Système opérationnel";
            }
        }

        function initializeCharts() {
            // Graphique de performance
            const performanceCtx = document.getElementById('performanceChart').getContext('2d');
            const performanceChart = new Chart(performanceCtx, {
                type: 'line',
                data: {
                    labels: ['Sem 1', 'Sem 2', 'Sem 3', 'Sem 4', 'Sem 5', 'Sem 6', 'Sem 7', 'Sem 8'],
                    datasets: [
                        {
                            label: 'Moyenne générale',
                            data: [12.5, 13.2, 12.8, 13.5, 14.1, 13.8, 14.2, 14.5],
                            borderColor: '#2563eb',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Taux de présence',
                            data: [82, 85, 87, 84, 88, 86, 89, 91],
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 10,
                            max: 20
                        }
                    }
                }
            });

            // Graphique des effectifs
            const effectifsCtx = document.getElementById('effectifsChart').getContext('2d');
            const effectifsChart = new Chart(effectifsCtx, {
                type: 'doughnut',
                data: {
                    labels: ['6ème A', '5ème B', '4ème C', '3ème A', '2nde A', '1ère A', 'Tle A'],
                    datasets: [{
                        data: [32, 28, 30, 35, 40, 38, 42],
                        backgroundColor: [
                            '#3b82f6', '#60a5fa', '#93c5fd', 
                            '#10b981', '#34d399', '#6ee7b7',
                            '#f59e0b', '#fbbf24'
                        ],
                        borderWidth: 2,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right',
                        }
                    }
                }
            });
        }

        function loadRecentActivities() {
            const activitiesContainer = document.getElementById('recentActivities');
            const activities = [
                { action: "Inscription", details: "Nouvel élève: Jean Kouamé", time: "Il y a 2 heures", icon: "user-plus", color: "blue" },
                { action: "Note ajoutée", details: "Mathématiques: 18/20 pour Aïcha Traoré", time: "Il y a 4 heures", icon: "edit", color: "green" },
                { action: "Absence", details: "Koffi Yao absent aujourd'hui", time: "Il y a 1 jour", icon: "user-clock", color: "amber" },
                { action: "Message", details: "Nouveau message de Kouassi Paul", time: "Il y a 2 jours", icon: "envelope", color: "indigo" }
            ];

            activitiesContainer.innerHTML = activities.map(activity => `
                <div class="flex items-start gap-3 p-3 rounded-xl bg-gray-50/50 hover:bg-gray-100/50 transition-colors">
                    <div class="w-8 h-8 rounded-full bg-${activity.color}-100 flex items-center justify-center flex-shrink-0 mt-1">
                        <i class="fas fa-${activity.icon} text-${activity.color}-600 text-sm"></i>
                    </div>
                    <div class="flex-1">
                        <div class="font-medium text-gray-900">${activity.action}</div>
                        <div class="text-sm text-gray-600">${activity.details}</div>
                        <div class="text-xs text-gray-500 mt-1">${activity.time}</div>
                    </div>
                </div>
            `).join('');
        }

        function loadUpcomingEvents() {
            const eventsContainer = document.getElementById('upcomingEvents');
            const events = [
                { title: "Conseil de classe", date: "25 Jan 2024", time: "14:00", type: "important" },
                { title: "Réunion parents-professeurs", date: "28 Jan 2024", time: "16:30", type: "info" },
                { title: "Journée portes ouvertes", date: "5 Fév 2024", time: "09:00", type: "success" },
                { title: "Examen blanc", date: "12 Fév 2024", time: "08:00", type: "warning" }
            ];

            eventsContainer.innerHTML = events.map(event => `
                <div class="flex items-center gap-3 p-3 rounded-xl border border-gray-200/50 hover:border-gray-300 transition-colors">
                    <div class="w-12 h-12 rounded-lg bg-${event.type === 'important' ? 'red' : event.type === 'warning' ? 'amber' : event.type === 'success' ? 'green' : 'blue'}-100 flex flex-col items-center justify-center flex-shrink-0">
                        <div class="text-sm font-bold text-${event.type === 'important' ? 'red' : event.type === 'warning' ? 'amber' : event.type === 'success' ? 'green' : 'blue'}-700">${event.date.split(' ')[0]}</div>
                        <div class="text-xs text-${event.type === 'important' ? 'red' : event.type === 'warning' ? 'amber' : event.type === 'success' ? 'green' : 'blue'}-600">${event.date.split(' ')[1]}</div>
                    </div>
                    <div class="flex-1">
                        <div class="font-medium text-gray-900">${event.title}</div>
                        <div class="text-sm text-gray-600">${event.date} • ${event.time}</div>
                    </div>
                </div>
            `).join('');
        }

        function refreshDashboardStats() {
            // Simuler le chargement
            const refreshBtn = document.getElementById('refreshStats');
            const originalText = refreshBtn.innerHTML;
            refreshBtn.innerHTML = '<div class="loading"></div>';
            refreshBtn.disabled = true;

            // Mettre à jour les données après un délai
            setTimeout(() => {
                updateDashboardStats();
                refreshBtn.innerHTML = originalText;
                refreshBtn.disabled = false;
                
                // Afficher une notification
                Swal.fire({
                    title: 'Données actualisées',
                    text: 'Les statistiques ont été mises à jour avec succès',
                    icon: 'success',
                    timer: 2000,
                    showConfirmButton: false
                });
            }, 1500);
        }

        function generateReport() {
            // Simuler la génération d'un rapport
            const btn = document.getElementById('btnGenererRapport');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<div class="loading mr-2"></div> Génération...';
            btn.disabled = true;

            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
                
                Swal.fire({
                    title: 'Rapport généré',
                    text: 'Le rapport mensuel a été généré avec succès',
                    icon: 'success',
                    confirmButtonText: 'Télécharger'
                });
            }, 2000);
        }

        // ====== GESTION DES ÉLÈVES ======
        function initializeElevesPage() {
            renderElevesTable();
            setupElevesPagination();
        }

        function renderElevesTable(eleves = appState.eleves) {
            const tableBody = DOMCache.elevesTable;
            if (!tableBody) return;
            
            if (!eleves || eleves.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="6" class="px-6 py-8 text-center text-gray-500">
                            <i class="fas fa-users text-4xl mb-4 text-gray-300"></i>
                            <div class="text-lg font-medium">Aucun élève trouvé</div>
                            <p class="mt-2">Commencez par ajouter un nouvel élève</p>
                        </td>
                    </tr>
                `;
                return;
            }

            tableBody.innerHTML = eleves.map(eleve => `
                <tr class="border-b border-gray-200/50 last:border-0">
                    <td class="px-6 py-4">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-200 to-green-200 flex items-center justify-center text-blue-800 font-semibold">
                                ${eleve.prenom.charAt(0)}${eleve.nom.charAt(0)}
                            </div>
                            <div>
                                <div class="font-medium text-gray-900">${eleve.prenom} ${eleve.nom}</div>
                                <div class="text-sm text-gray-500">${eleve.sexe === 'M' ? 'Masculin' : 'Féminin'}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="badge badge-info">${eleve.classe}</span>
                    </td>
                    <td class="px-6 py-4 font-mono text-sm text-gray-600">${eleve.matricule}</td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-900">${eleve.telephone}</div>
                        <div class="text-sm text-gray-500">${eleve.email}</div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="badge ${eleve.statut === 'Actif' ? 'badge-success' : 'badge-warning'}">${eleve.statut}</span>
                    </td>
                    <td class="px-6 py-4 text-right">
                        <div class="flex justify-end gap-2">
                            <button class="p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors" data-action="edit-eleve" data-id="${eleve.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg transition-colors" data-action="view-eleve" data-id="${eleve.id}">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors" data-action="delete-eleve" data-id="${eleve.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
            
            // Ajouter les écouteurs d'événements pour les boutons d'action
            document.querySelectorAll('[data-action="edit-eleve"]').forEach(button => {
                button.addEventListener('click', function() {
                    editEleve(parseInt(this.dataset.id));
                });
            });
            
            document.querySelectorAll('[data-action="view-eleve"]').forEach(button => {
                button.addEventListener('click', function() {
                    viewEleve(parseInt(this.dataset.id));
                });
            });
            
            document.querySelectorAll('[data-action="delete-eleve"]').forEach(button => {
                button.addEventListener('click', function() {
                    deleteEleve(parseInt(this.dataset.id));
                });
            });
        }

        function setupElevesPagination() {
            // Configuration basique de pagination
            const paginationTotal = document.getElementById('paginationTotal');
            const paginationStart = document.getElementById('paginationStart');
            const paginationEnd = document.getElementById('paginationEnd');
            
            if (paginationTotal) paginationTotal.textContent = appState.eleves ? appState.eleves.length : 0;
            if (paginationStart) paginationStart.textContent = 1;
            if (paginationEnd) paginationEnd.textContent = Math.min(10, appState.eleves ? appState.eleves.length : 0);
        }

        function openEleveModal(eleveId = null) {
            const modal = DOMCache.eleveModal;
            if (!modal) return;
            const title = document.getElementById('eleveModalTitle');
            const form = DOMCache.eleveForm;
            
            if (eleveId) {
                // Mode édition
                title.textContent = "Modifier l'élève";
                const eleve = appState.eleves.find(e => e.id === eleveId);
                if (eleve) {
                    document.getElementById('eleveNom').value = eleve.nom;
                    document.getElementById('elevePrenom').value = eleve.prenom;
                    document.getElementById('eleveNaissance').value = eleve.dateNaissance || '';
                    document.getElementById('eleveLieuNaissance').value = eleve.lieuNaissance || '';
                    document.getElementById('eleveSexe').value = eleve.sexe;
                    document.getElementById('eleveClasse').value = eleve.classe;
                    document.getElementById('eleveTelephone').value = eleve.telephone;
                    document.getElementById('eleveEmail').value = eleve.email;
                    document.getElementById('eleveAdresse').value = eleve.adresse;
                    
                    // Stocker l'ID de l'élève pour la mise à jour
                    form.dataset.eleveId = eleveId;
                }
            } else {
                // Mode création
                title.textContent = "Nouvel élève";
                form.reset();
                delete form.dataset.eleveId;
            }
            
            modal.classList.remove('hidden');
        }

        function closeEleveModal() {
            if (DOMCache.eleveModal) {
                DOMCache.eleveModal.classList.add('hidden');
            }
        }

        function saveEleve() {
            if (!DOMCache.eleveForm) return;
            const form = DOMCache.eleveForm;
            const eleveId = form.dataset.eleveId;
            
            // Récupérer les valeurs du formulaire
            const eleveData = {
                nom: document.getElementById('eleveNom').value,
                prenom: document.getElementById('elevePrenom').value,
                dateNaissance: document.getElementById('eleveNaissance').value,
                lieuNaissance: document.getElementById('eleveLieuNaissance').value,
                sexe: document.getElementById('eleveSexe').value,
                classe: document.getElementById('eleveClasse').value,
                telephone: document.getElementById('eleveTelephone').value,
                email: document.getElementById('eleveEmail').value,
                adresse: document.getElementById('eleveAdresse').value,
                statut: 'Actif'
            };
            
            if (eleveId) {
                // Mise à jour d'un élève existant
                const index = appState.eleves.findIndex(e => e.id === parseInt(eleveId));
                if (index !== -1) {
                    appState.eleves[index] = { ...appState.eleves[index], ...eleveData };
                    
                    Swal.fire({
                        title: 'Élève modifié',
                        text: 'Les informations de l\'élève ont été mises à jour avec succès',
                        icon: 'success',
                        timer: 2000,
                        showConfirmButton: false
                    });
                }
            } else {
                // Création d'un nouvel élève
                if (!appState.eleves || appState.eleves.length === 0) {
                    appState.eleves = [];
                }
                const newId = appState.eleves.length > 0 ? Math.max(...appState.eleves.map(e => e.id)) + 1 : 1;
                const matricule = `ELEV-2024-${newId.toString().padStart(3, '0')}`;
                
                appState.eleves.push({
                    id: newId,
                    matricule: matricule,
                    ...eleveData
                });
                
                Swal.fire({
                    title: 'Élève créé',
                    text: 'Le nouvel élève a été ajouté avec succès',
                    icon: 'success',
                    timer: 2000,
                    showConfirmButton: false
                });
            }
            
            // Mettre à jour l'interface
            renderElevesTable();
            updateDashboardStats();
            closeEleveModal();
        }

        function editEleve(id) {
            openEleveModal(id);
        }

        function viewEleve(id) {
            Swal.fire({
                title: 'Détails de l\'élève',
                text: 'Cette fonctionnalité sera disponible dans la prochaine version',
                icon: 'info',
                confirmButtonText: 'Compris'
            });
        }

        function deleteEleve(id) {
            Swal.fire({
                title: 'Supprimer l\'élève',
                text: 'Êtes-vous sûr de vouloir supprimer cet élève ? Cette action est irréversible.',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Oui, supprimer',
                cancelButtonText: 'Annuler'
            }).then((result) => {
                if (result.isConfirmed) {
                    appState.eleves = appState.eleves.filter(e => e.id !== id);
                    renderElevesTable();
                    updateDashboardStats();
                    
                    Swal.fire({
                        title: 'Élève supprimé',
                        text: 'L\'élève a été supprimé avec succès',
                        icon: 'success',
                        timer: 2000,
                        showConfirmButton: false
                    });
                }
            });
        }

        // ====== GESTION DES ENSEIGNANTS ======
        function initializeEnseignantsPage() {
            updateEnseignantsStats();
            renderEnseignantsTable();
            renderAffectationsEnseignantsList();
            populateEnseignantsSelects();
        }

        function updateEnseignantsStats() {
            const statEnseignantsTotal = document.getElementById('statEnseignantsTotal');
            const statMatiereEnseignants = document.getElementById('statMatiereEnseignants');
            const statPresenceEnseignants = document.getElementById('statPresenceEnseignants');
            
            if (statEnseignantsTotal) statEnseignantsTotal.textContent = appState.enseignants ? appState.enseignants.length : 0;
            if (statMatiereEnseignants) statMatiereEnseignants.textContent = appState.matieres ? appState.matieres.length : 0;
            if (statPresenceEnseignants) statPresenceEnseignants.textContent = "95%";
        }

        function renderEnseignantsTable(enseignants = appState.enseignants) {
            const tableBody = DOMCache.enseignantsTable;
            if (!tableBody) return;
            
            if (!enseignants || enseignants.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="6" class="px-6 py-8 text-center text-gray-500">
                            <i class="fas fa-chalkboard-teacher text-4xl mb-4 text-gray-300"></i>
                            <div class="text-lg font-medium">Aucun enseignant trouvé</div>
                            <p class="mt-2">Commencez par ajouter un nouvel enseignant</p>
                        </td>
                    </tr>
                `;
                return;
            }

            tableBody.innerHTML = enseignants.map(enseignant => `
                <tr class="border-b border-gray-200/50 last:border-0">
                    <td class="px-6 py-4">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-200 to-purple-200 flex items-center justify-center text-blue-800 font-semibold">
                                ${enseignant.prenom.charAt(0)}${enseignant.nom.charAt(0)}
                            </div>
                            <div>
                                <div class="font-medium text-gray-900">${enseignant.prenom} ${enseignant.nom}</div>
                                <div class="text-sm text-gray-500">${enseignant.specialite}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="badge badge-info">${enseignant.specialite}</span>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-600">
                            ${getClassesEnseignant(enseignant.id).map(c => c.nom).join(', ') || 'Aucune classe'}
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-900">${enseignant.telephone}</div>
                        <div class="text-sm text-gray-500">${enseignant.email}</div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="badge ${enseignant.statut === 'Actif' ? 'badge-success' : enseignant.statut === 'Congé' ? 'badge-warning' : 'badge-danger'}">${enseignant.statut}</span>
                    </td>
                    <td class="px-6 py-4 text-right">
                        <div class="flex justify-end gap-2">
                            <button class="p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors" data-action="edit-enseignant" data-id="${enseignant.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg transition-colors" data-action="view-enseignant" data-id="${enseignant.id}">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors" data-action="delete-enseignant" data-id="${enseignant.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
            
            // Ajouter les écouteurs d'événements pour les boutons d'action
            document.querySelectorAll('[data-action="edit-enseignant"]').forEach(button => {
                button.addEventListener('click', function() {
                    editEnseignant(parseInt(this.dataset.id));
                });
            });
            
            document.querySelectorAll('[data-action="view-enseignant"]').forEach(button => {
                button.addEventListener('click', function() {
                    viewEnseignant(parseInt(this.dataset.id));
                });
            });
            
            document.querySelectorAll('[data-action="delete-enseignant"]').forEach(button => {
                button.addEventListener('click', function() {
                    deleteEnseignant(parseInt(this.dataset.id));
                });
            });
        }

        function getClassesEnseignant(enseignantId) {
            const affectations = appState.affectations.filter(a => a.enseignantId === enseignantId);
            return affectations.map(a => appState.classes.find(c => c.id === a.classeId)).filter(Boolean);
        }

        function renderAffectationsEnseignantsList() {
            const affectationsContainer = DOMCache.affectationsEnseignantsList;
            
            if (appState.affectations.length === 0) {
                affectationsContainer.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <i class="fas fa-link text-4xl mb-4 text-gray-300"></i>
                        <div class="text-lg font-medium">Aucune affectation</div>
                        <p class="mt-2">Créez des affectations entre enseignants et matières</p>
                    </div>
                `;
                return;
            }

            affectationsContainer.innerHTML = appState.affectations.map(affectation => {
                const enseignant = appState.enseignants.find(e => e.id === affectation.enseignantId);
                const matiere = appState.matieres.find(m => m.id === affectation.matiereId);
                const classe = appState.classes.find(c => c.id === affectation.classeId);
                
                return `
                    <div class="flex items-center justify-between p-3 border border-gray-200/50 rounded-lg">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600">
                                <i class="fas fa-link text-sm"></i>
                            </div>
                            <div>
                                <div class="text-sm font-medium text-gray-900">${enseignant?.prenom} ${enseignant?.nom}</div>
                                <div class="text-xs text-gray-500">${matiere?.nom} • ${classe?.nom}</div>
                            </div>
                        </div>
                        <button class="p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded transition-colors" data-action="delete-affectation-enseignant" data-id="${affectation.id}">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
            }).join('');
        }

        function populateEnseignantsSelects() {
            // Peupler les sélecteurs d'enseignants
            const enseignantMatiereSelect = document.getElementById('enseignantMatiereSelect');
            const enseignantEmploiSelect = document.getElementById('enseignantEmploiSelect');
            
            if (enseignantMatiereSelect) {
                enseignantMatiereSelect.innerHTML = '<option value="">Sélectionner un enseignant</option>' +
                    appState.enseignants.map(e => `<option value="${e.id}">${e.prenom} ${e.nom}</option>`).join('');
            }
            
            if (enseignantEmploiSelect) {
                enseignantEmploiSelect.innerHTML = '<option value="">Sélectionner un enseignant</option>' +
                    appState.enseignants.map(e => `<option value="${e.id}">${e.prenom} ${e.nom}</option>`).join('');
            }
            
            // Peupler les sélecteurs de matières
            const matiereEnseignantSelect = document.getElementById('matiereEnseignantSelect');
            if (matiereEnseignantSelect) {
                matiereEnseignantSelect.innerHTML = '<option value="">Sélectionner une matière</option>' +
                    appState.matieres.map(m => `<option value="${m.id}">${m.nom}</option>`).join('');
            }
            
            // Peupler les sélecteurs de classes
            const classesEnseignantSelect = document.getElementById('classesEnseignantSelect');
            if (classesEnseignantSelect) {
                classesEnseignantSelect.innerHTML = '<option value="">Sélectionner une ou plusieurs classes</option>' +
                    appState.classes.map(c => `<option value="${c.id}">${c.nom}</option>`).join('');
            }
        }

        function openEnseignantModal(enseignantId = null) {
            const modal = DOMCache.enseignantModal;
            if (!modal) return;
            const title = document.getElementById('enseignantModalTitle');
            const form = DOMCache.enseignantForm;
            
            if (enseignantId) {
                // Mode édition
                title.textContent = "Modifier l'enseignant";
                const enseignant = appState.enseignants.find(e => e.id === enseignantId);
                if (enseignant) {
                    document.getElementById('enseignantNom').value = enseignant.nom;
                    document.getElementById('enseignantPrenom').value = enseignant.prenom;
                    document.getElementById('enseignantNaissance').value = enseignant.dateNaissance || '';
                    document.getElementById('enseignantLieuNaissance').value = enseignant.lieuNaissance || '';
                    document.getElementById('enseignantSexe').value = enseignant.sexe || '';
                    document.getElementById('enseignantSpecialite').value = enseignant.specialite;
                    document.getElementById('enseignantTelephone').value = enseignant.telephone;
                    document.getElementById('enseignantEmail').value = enseignant.email;
                    document.getElementById('enseignantAdresse').value = enseignant.adresse || '';
                    document.getElementById('enseignantEmbauche').value = enseignant.dateEmbauche || '';
                    document.getElementById('enseignantStatut').value = enseignant.statut;
                    
                    // Stocker l'ID de l'enseignant pour la mise à jour
                    form.dataset.enseignantId = enseignantId;
                }
            } else {
                // Mode création
                title.textContent = "Nouvel enseignant";
                form.reset();
                delete form.dataset.enseignantId;
            }
            
            modal.classList.remove('hidden');
        }

        function closeEnseignantModal() {
            if (DOMCache.enseignantModal) {
                DOMCache.enseignantModal.classList.add('hidden');
            }
        }

        function saveEnseignant() {
            if (!DOMCache.enseignantForm) return;
            const form = DOMCache.enseignantForm;
            const enseignantId = form.dataset.enseignantId;
            
            // Récupérer les valeurs du formulaire
            const enseignantData = {
                nom: document.getElementById('enseignantNom').value,
                prenom: document.getElementById('enseignantPrenom').value,
                dateNaissance: document.getElementById('enseignantNaissance').value,
                lieuNaissance: document.getElementById('enseignantLieuNaissance').value,
                sexe: document.getElementById('enseignantSexe').value,
                specialite: document.getElementById('enseignantSpecialite').value,
                telephone: document.getElementById('enseignantTelephone').value,
                email: document.getElementById('enseignantEmail').value,
                adresse: document.getElementById('enseignantAdresse').value,
                dateEmbauche: document.getElementById('enseignantEmbauche').value,
                statut: document.getElementById('enseignantStatut').value
            };
            
            if (enseignantId) {
                // Mise à jour d'un enseignant existant
                const index = appState.enseignants.findIndex(e => e.id === parseInt(enseignantId));
                if (index !== -1) {
                    appState.enseignants[index] = { ...appState.enseignants[index], ...enseignantData };
                    
                    Swal.fire({
                        title: 'Enseignant modifié',
                        text: 'Les informations de l\'enseignant ont été mises à jour avec succès',
                        icon: 'success',
                        timer: 2000,
                        showConfirmButton: false
                    });
                }
            } else {
                // Création d'un nouvel enseignant
                if (!appState.enseignants || appState.enseignants.length === 0) {
                    appState.enseignants = [];
                }
                const newId = appState.enseignants.length > 0 ? Math.max(...appState.enseignants.map(e => e.id)) + 1 : 1;
                
                appState.enseignants.push({
                    id: newId,
                    ...enseignantData
                });
                
                Swal.fire({
                    title: 'Enseignant créé',
                    text: 'Le nouvel enseignant a été ajouté avec succès',
                    icon: 'success',
                    timer: 2000,
                    showConfirmButton: false
                });
            }
            
            // Mettre à jour l'interface
            renderEnseignantsTable();
            updateEnseignantsStats();
            populateEnseignantsSelects();
            closeEnseignantModal();
        }

        function editEnseignant(id) {
            openEnseignantModal(id);
        }

        function viewEnseignant(id) {
            Swal.fire({
                title: 'Détails de l\'enseignant',
                text: 'Cette fonctionnalité sera disponible dans la prochaine version',
                icon: 'info',
                confirmButtonText: 'Compris'
            });
        }

        function deleteEnseignant(id) {
            Swal.fire({
                title: 'Supprimer l\'enseignant',
                text: 'Êtes-vous sûr de vouloir supprimer cet enseignant ? Cette action est irréversible.',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Oui, supprimer',
                cancelButtonText: 'Annuler'
            }).then((result) => {
                if (result.isConfirmed) {
                    appState.enseignants = appState.enseignants.filter(e => e.id !== id);
                    renderEnseignantsTable();
                    updateEnseignantsStats();
                    
                    Swal.fire({
                        title: 'Enseignant supprimé',
                        text: 'L\'enseignant a été supprimé avec succès',
                        icon: 'success',
                        timer: 2000,
                        showConfirmButton: false
                    });
                }
            });
        }

        function saveAffectationMatiereEnseignant() {
            const enseignantId = parseInt(document.getElementById('enseignantMatiereSelect').value);
            const matiereId = parseInt(document.getElementById('matiereEnseignantSelect').value);
            const classesSelect = document.getElementById('classesEnseignantSelect');
            const classesIds = Array.from(classesSelect.selectedOptions).map(option => parseInt(option.value));
            
            if (!enseignantId || !matiereId || classesIds.length === 0) {
                Swal.fire({
                    title: 'Erreur',
                    text: 'Veuillez sélectionner un enseignant, une matière et au moins une classe',
                    icon: 'error',
                    confirmButtonText: 'Compris'
                });
                return;
            }
            
            let affectationsCreees = 0;
            
            // Créer une affectation pour chaque classe sélectionnée
            classesIds.forEach(classeId => {
                // Vérifier si l'affectation existe déjà
                const existeDeja = appState.affectations.some(a => 
                    a.enseignantId === enseignantId && a.matiereId === matiereId && a.classeId === classeId
                );
                
                if (!existeDeja) {
                    // Créer la nouvelle affectation
                    const newId = appState.affectations.length > 0 ? Math.max(...appState.affectations.map(a => a.id)) + 1 : 1;
                    appState.affectations.push({
                        id: newId,
                        enseignantId,
                        matiereId,
                        classeId
                    });
                    affectationsCreees++;
                }
            });
            
            // Réinitialiser le formulaire
            document.getElementById('affectationMatiereForm').reset();
            
            // Mettre à jour l'interface
            renderAffectationsEnseignantsList();
            renderEnseignantsTable();
            
            if (affectationsCreees > 0) {
                Swal.fire({
                    title: 'Affectation(s) créée(s)',
                    text: `${affectationsCreees} affectation(s) ont été enregistrée(s) avec succès`,
                    icon: 'success',
                    timer: 2000,
                    showConfirmButton: false
                });
            } else {
                Swal.fire({
                    title: 'Affectations existantes',
                    text: 'Toutes les affectations sélectionnées existent déjà',
                    icon: 'warning',
                    confirmButtonText: 'Compris'
                });
            }
        }

        function switchTabEnseignants(tabName) {
            // Mettre à jour les boutons d'onglets
            document.querySelectorAll('.tab-btn-enseignants').forEach(btn => {
                btn.classList.remove('border-blue-500', 'text-blue-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Activer le bouton sélectionné
            const activeBtn = document.querySelector(`[data-tab="${tabName}"]`);
            activeBtn.classList.add('border-blue-500', 'text-blue-600');
            activeBtn.classList.remove('border-transparent', 'text-gray-500');
            
            // Afficher le contenu de l'onglet sélectionné
            document.querySelectorAll('.tab-content-enseignants').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.getElementById(`tab-${tabName}`).classList.remove('hidden');
        }

        // ====== GESTION DES CLASSES ET MATIÈRES ======
        function initializeClassesPage() {
            updateClassesStats();
            renderClassesTable();
            renderMatieresTable();
            renderAffectationsList();
            populateSelects();
        }

        function updateClassesStats() {
            const statClasses = document.getElementById('statClasses');
            const statMatieresTotal = document.getElementById('statMatieresTotal');
            const statEffectifClasses = document.getElementById('statEffectifClasses');
            
            if (statClasses) statClasses.textContent = appState.classes ? appState.classes.length : 0;
            if (statMatieresTotal) statMatieresTotal.textContent = appState.matieres ? appState.matieres.length : 0;
            
            if (statEffectifClasses && appState.classes) {
                const totalEffectif = appState.classes.reduce((sum, classe) => sum + (classe.effectif || 0), 0);
                statEffectifClasses.textContent = totalEffectif;
            }
        }

        function renderClassesTable(classes = appState.classes) {
            const tableBody = DOMCache.classesTable;
            if (!tableBody) return;
            
            if (!classes || classes.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="7" class="px-6 py-8 text-center text-gray-500">
                            <i class="fas fa-door-open text-4xl mb-4 text-gray-300"></i>
                            <div class="text-lg font-medium">Aucune classe trouvée</div>
                            <p class="mt-2">Commencez par ajouter une nouvelle classe</p>
                        </td>
                    </tr>
                `;
                return;
            }

            tableBody.innerHTML = classes.map(classe => `
                <tr class="border-b border-gray-200/50 last:border-0">
                    <td class="px-6 py-4">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-200 to-purple-200 flex items-center justify-center text-blue-800 font-semibold">
                                <i class="fas fa-door-open"></i>
                            </div>
                            <div>
                                <div class="font-medium text-gray-900">${classe.nom}</div>
                                <div class="text-sm text-gray-500">${classe.salle}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="badge badge-info">${classe.niveau}</span>
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex items-center">
                            <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: ${(classe.effectif / 50) * 100}%"></div>
                            </div>
                            <span class="text-sm font-medium">${classe.effectif}/50</span>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-900">${classe.professeurPrincipal}</div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="text-sm text-gray-600">${classe.salle}</span>
                    </td>
                    <td class="px-6 py-4">
                        <span class="badge ${classe.statut === 'Active' ? 'badge-success' : 'badge-warning'}">${classe.statut}</span>
                    </td>
                    <td class="px-6 py-4 text-right">
                        <div class="flex justify-end gap-2">
                            <button class="p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors" data-action="edit-classe" data-id="${classe.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg transition-colors" data-action="view-classe" data-id="${classe.id}">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors" data-action="delete-classe" data-id="${classe.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function renderMatieresTable(matieres = appState.matieres) {
            const tableBody = DOMCache.matieresTable;
            if (!tableBody) return;
            
            if (!matieres || matieres.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="7" class="px-6 py-8 text-center text-gray-500">
                            <i class="fas fa-book text-4xl mb-4 text-gray-300"></i>
                            <div class="text-lg font-medium">Aucune matière trouvée</div>
                            <p class="mt-2">Commencez par ajouter une nouvelle matière</p>
                        </td>
                    </tr>
                `;
                return;
            }

            tableBody.innerHTML = matieres.map(matiere => `
                <tr class="border-b border-gray-200/50 last:border-0">
                    <td class="px-6 py-4">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold" style="background-color: ${matiere.couleur}">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="font-medium text-gray-900">${matiere.nom}</div>
                        </div>
                    </td>
                    <td class="px-6 py-4 font-mono text-sm text-gray-600">${matiere.code}</td>
                    <td class="px-6 py-4">
                        <span class="badge badge-info">${matiere.coefficient}</span>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-900">
                            ${getEnseignantsMatiere(matiere.id).map(e => `${e.prenom} ${e.nom}`).join(', ') || 'Aucun'}
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-600">
                            ${getClassesMatiere(matiere.id).map(c => c.nom).join(', ') || 'Aucune'}
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="badge ${matiere.statut === 'Active' ? 'badge-success' : 'badge-warning'}">${matiere.statut}</span>
                    </td>
                    <td class="px-6 py-4 text-right">
                        <div class="flex justify-end gap-2">
                            <button class="p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors" data-action="edit-matiere" data-id="${matiere.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg transition-colors" data-action="view-matiere" data-id="${matiere.id}">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors" data-action="delete-matiere" data-id="${matiere.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function renderAffectationsList() {
            const affectationsContainer = DOMCache.affectationsList;
            
            if (appState.affectations.length === 0) {
                affectationsContainer.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <i class="fas fa-link text-4xl mb-4 text-gray-300"></i>
                        <div class="text-lg font-medium">Aucune affectation</div>
                        <p class="mt-2">Créez des affectations entre enseignants, matières et classes</p>
                    </div>
                `;
                return;
            }

            affectationsContainer.innerHTML = appState.affectations.map(affectation => {
                const enseignant = appState.enseignants.find(e => e.id === affectation.enseignantId);
                const matiere = appState.matieres.find(m => m.id === affectation.matiereId);
                const classe = appState.classes.find(c => c.id === affectation.classeId);
                
                return `
                    <div class="flex items-center justify-between p-3 border border-gray-200/50 rounded-lg">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600">
                                <i class="fas fa-link text-sm"></i>
                            </div>
                            <div>
                                <div class="text-sm font-medium text-gray-900">${enseignant?.prenom} ${enseignant?.nom}</div>
                                <div class="text-xs text-gray-500">${matiere?.nom} • ${classe?.nom}</div>
                            </div>
                        </div>
                        <button class="p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded transition-colors" data-action="delete-affectation" data-id="${affectation.id}">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
            }).join('');
        }

        function getEnseignantsMatiere(matiereId) {
            const affectations = appState.affectations.filter(a => a.matiereId === matiereId);
            return affectations.map(a => appState.enseignants.find(e => e.id === a.enseignantId)).filter(Boolean);
        }

        function getClassesMatiere(matiereId) {
            const affectations = appState.affectations.filter(a => a.matiereId === matiereId);
            return affectations.map(a => appState.classes.find(c => c.id === a.classeId)).filter(Boolean);
        }

        function populateSelects() {
            // Peupler les sélecteurs d'enseignants
            const enseignantSelect = document.getElementById('enseignantSelect');
            enseignantSelect.innerHTML = '<option value="">Sélectionner un enseignant</option>' +
                appState.enseignants.map(e => `<option value="${e.id}">${e.prenom} ${e.nom}</option>`).join('');
            
            // Peupler les sélecteurs de matières
            const matiereSelect = document.getElementById('matiereSelect');
            matiereSelect.innerHTML = '<option value="">Sélectionner une matière</option>' +
                appState.matieres.map(m => `<option value="${m.id}">${m.nom}</option>`).join('');
            
            // Peupler les sélecteurs de classes
            const classeSelect = document.getElementById('classeSelect');
            classeSelect.innerHTML = '<option value="">Sélectionner une classe</option>' +
                appState.classes.map(c => `<option value="${c.id}">${c.nom}</option>`).join('');
            
            // Peupler le sélecteur de professeur principal
            const classeProfesseur = document.getElementById('classeProfesseur');
            classeProfesseur.innerHTML = '<option value="">Sélectionner un professeur</option>' +
                appState.enseignants.map(e => `<option value="${e.id}">${e.prenom} ${e.nom}</option>`).join('');
        }

        function openClasseModal(classeId = null) {
            const modal = DOMCache.classeModal;
            if (!modal) return;
            const title = document.getElementById('classeModalTitle');
            const form = DOMCache.classeForm;
            
            if (classeId) {
                // Mode édition
                title.textContent = "Modifier la classe";
                const classe = appState.classes.find(c => c.id === classeId);
                if (classe) {
                    document.getElementById('classeNom').value = classe.nom;
                    document.getElementById('classeNiveau').value = classe.niveau;
                    document.getElementById('classeSalle').value = classe.salle;
                    document.getElementById('classeCapacite').value = classe.capacite || 30;
                    document.getElementById('classeDescription').value = classe.description || '';
                    
                    // Stocker l'ID de la classe pour la mise à jour
                    form.dataset.classeId = classeId;
                }
            } else {
                // Mode création
                title.textContent = "Nouvelle classe";
                form.reset();
                delete form.dataset.classeId;
            }
            
            modal.classList.remove('hidden');
        }

        function closeClasseModal() {
            if (DOMCache.classeModal) {
                DOMCache.classeModal.classList.add('hidden');
            }
        }

        function saveClasse() {
            const form = DOMCache.classeForm;
            const classeId = form.dataset.classeId;
            
            // Récupérer les valeurs du formulaire
            const classeData = {
                nom: document.getElementById('classeNom').value,
                niveau: document.getElementById('classeNiveau').value,
                salle: document.getElementById('classeSalle').value,
                capacite: parseInt(document.getElementById('classeCapacite').value),
                description: document.getElementById('classeDescription').value,
                statut: 'Active'
            };
            
            if (classeId) {
                // Mise à jour d'une classe existante
                const index = appState.classes.findIndex(c => c.id === parseInt(classeId));
                if (index !== -1) {
                    appState.classes[index] = { ...appState.classes[index], ...classeData };
                    
                    Swal.fire({
                        title: 'Classe modifiée',
                        text: 'Les informations de la classe ont été mises à jour avec succès',
                        icon: 'success',
                        timer: 2000,
                        showConfirmButton: false
                    });
                }
            } else {
                // Création d'une nouvelle classe
                const newId = Math.max(...appState.classes.map(c => c.id)) + 1;
                
                appState.classes.push({
                    id: newId,
                    effectif: 0,
                    professeurPrincipal: '',
                    ...classeData
                });
                
                Swal.fire({
                    title: 'Classe créée',
                    text: 'La nouvelle classe a été ajoutée avec succès',
                    icon: 'success',
                    timer: 2000,
                    showConfirmButton: false
                });
            }
            
            // Mettre à jour l'interface
            renderClassesTable();
            updateClassesStats();
            populateSelects();
            closeClasseModal();
        }

        function openMatiereModal(matiereId = null) {
            const modal = DOMCache.matiereModal;
            if (!modal) return;
            const title = document.getElementById('matiereModalTitle');
            const form = DOMCache.matiereForm;
            
            if (matiereId) {
                // Mode édition
                title.textContent = "Modifier la matière";
                const matiere = appState.matieres.find(m => m.id === matiereId);
                if (matiere) {
                    document.getElementById('matiereNom').value = matiere.nom;
                    document.getElementById('matiereCode').value = matiere.code;
                    document.getElementById('matiereCoefficient').value = matiere.coefficient;
                    document.getElementById('matiereCouleur').value = matiere.couleur;
                    document.getElementById('matiereDescription').value = matiere.description || '';
                    document.getElementById('matiereActive').checked = matiere.statut === 'Active';
                    
                    // Stocker l'ID de la matière pour la mise à jour
                    form.dataset.matiereId = matiereId;
                }
            } else {
                // Mode création
                title.textContent = "Nouvelle matière";
                form.reset();
                delete form.dataset.matiereId;
            }
            
            modal.classList.remove('hidden');
        }

        function closeMatiereModal() {
            if (DOMCache.matiereModal) {
                DOMCache.matiereModal.classList.add('hidden');
            }
        }

        function saveMatiere() {
            if (!DOMCache.matiereForm) return;
            const form = DOMCache.matiereForm;
            const matiereId = form.dataset.matiereId;
            
            // Récupérer les valeurs du formulaire
            const matiereData = {
                nom: document.getElementById('matiereNom').value,
                code: document.getElementById('matiereCode').value,
                coefficient: parseInt(document.getElementById('matiereCoefficient').value),
                couleur: document.getElementById('matiereCouleur').value,
                description: document.getElementById('matiereDescription').value,
                statut: document.getElementById('matiereActive').checked ? 'Active' : 'Inactive'
            };
            
            if (matiereId) {
                // Mise à jour d'une matière existante
                const index = appState.matieres.findIndex(m => m.id === parseInt(matiereId));
                if (index !== -1) {
                    appState.matieres[index] = { ...appState.matieres[index], ...matiereData };
                    
                    Swal.fire({
                        title: 'Matière modifiée',
                        text: 'Les informations de la matière ont été mises à jour avec succès',
                        icon: 'success',
                        timer: 2000,
                        showConfirmButton: false
                    });
                }
            } else {
                // Création d'une nouvelle matière
                const newId = Math.max(...appState.matieres.map(m => m.id)) + 1;
                
                appState.matieres.push({
                    id: newId,
                    ...matiereData
                });
                
                Swal.fire({
                    title: 'Matière créée',
                    text: 'La nouvelle matière a été ajoutée avec succès',
                    icon: 'success',
                    timer: 2000,
                    showConfirmButton: false
                });
            }
            
            // Mettre à jour l'interface
            renderMatieresTable();
            updateClassesStats();
            populateSelects();
            closeMatiereModal();
        }

        function saveAffectation() {
            const enseignantId = parseInt(document.getElementById('enseignantSelect').value);
            const matiereId = parseInt(document.getElementById('matiereSelect').value);
            const classeId = parseInt(document.getElementById('classeSelect').value);
            
            if (!enseignantId || !matiereId || !classeId) {
                Swal.fire({
                    title: 'Erreur',
                    text: 'Veuillez sélectionner un enseignant, une matière et une classe',
                    icon: 'error',
                    confirmButtonText: 'Compris'
                });
                return;
            }
            
            // Vérifier si l'affectation existe déjà
            const existeDeja = appState.affectations.some(a => 
                a.enseignantId === enseignantId && a.matiereId === matiereId && a.classeId === classeId
            );
            
            if (existeDeja) {
                Swal.fire({
                    title: 'Affectation existante',
                    text: 'Cette affectation existe déjà',
                    icon: 'warning',
                    confirmButtonText: 'Compris'
                });
                return;
            }
            
            // Créer la nouvelle affectation
            const newId = Math.max(...appState.affectations.map(a => a.id)) + 1;
            appState.affectations.push({
                id: newId,
                enseignantId,
                matiereId,
                classeId
            });
            
            // Réinitialiser le formulaire
            document.getElementById('affectationForm').reset();
            
            // Mettre à jour l'interface
            renderAffectationsList();
            renderMatieresTable();
            
            Swal.fire({
                title: 'Affectation créée',
                text: 'L\'affectation a été enregistrée avec succès',
                icon: 'success',
                timer: 2000,
                showConfirmButton: false
            });
        }

        function switchTab(tabName) {
            // Mettre à jour les boutons d'onglets
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'text-blue-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Activer le bouton sélectionné
            const activeBtn = document.querySelector(`[data-tab="${tabName}"]`);
            activeBtn.classList.add('border-blue-500', 'text-blue-600');
            activeBtn.classList.remove('border-transparent', 'text-gray-500');
            
            // Afficher le contenu de l'onglet sélectionné
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.getElementById(`tab-${tabName}`).classList.remove('hidden');
        }

        // ====== GESTION DES NOTES ET ÉVALUATIONS ======
        function initializeNotesPage() {
            updateNotesStats();
            initializeNotesCharts();
        }

        function updateNotesStats() {
            // Simuler des données de démonstration
            document.getElementById('notesSaisies').textContent = "248";
            document.getElementById('moyenneGenerale').textContent = "14.2";
            document.getElementById('meilleureNote').textContent = "19.5";
            document.getElementById('nombreEvaluations').textContent = "12";
        }

        function initializeNotesCharts() {
            // Graphique de répartition des notes
            const repartitionCtx = document.getElementById('repartitionNotesChart');
            if (repartitionCtx) {
                new Chart(repartitionCtx, {
                    type: 'bar',
                    data: {
                        labels: ['0-5', '6-10', '11-15', '16-20'],
                        datasets: [{
                            label: 'Nombre d\'élèves',
                            data: [5, 45, 120, 78],
                            backgroundColor: [
                                '#ef4444',
                                '#f59e0b',
                                '#10b981',
                                '#3b82f6'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            }

            // Graphique d'évolution des moyennes
            const evolutionCtx = document.getElementById('evolutionMoyennesChart');
            if (evolutionCtx) {
                new Chart(evolutionCtx, {
                    type: 'line',
                    data: {
                        labels: ['Trim 1', 'Trim 2', 'Trim 3'],
                        datasets: [
                            {
                                label: '6ème A',
                                data: [12.5, 13.2, 14.1],
                                borderColor: '#3b82f6',
                                tension: 0.4
                            },
                            {
                                label: '5ème B',
                                data: [11.8, 12.5, 13.0],
                                borderColor: '#10b981',
                                tension: 0.4
                            },
                            {
                                label: '4ème C',
                                data: [13.2, 13.8, 14.5],
                                borderColor: '#f59e0b',
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 10
                            }
                        }
                    }
                });
            }
        }

        function switchTabNotes(tabName) {
            // Mettre à jour les boutons d'onglets
            document.querySelectorAll('.tab-btn-notes').forEach(btn => {
                btn.classList.remove('border-blue-500', 'text-blue-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Activer le bouton sélectionné
            const activeBtn = document.querySelector(`[data-tab="${tabName}"]`);
            activeBtn.classList.add('border-blue-500', 'text-blue-600');
            activeBtn.classList.remove('border-transparent', 'text-gray-500');
            
            // Afficher le contenu de l'onglet sélectionné
            document.querySelectorAll('.tab-content-notes').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.getElementById(`tab-${tabName}`).classList.remove('hidden');
        }

        function openNotesModal() {
            const modal = DOMCache.notesModal;
            if (!modal) return;
            
            modal.classList.remove('hidden');
        }

        function closeNotesModal() {
            if (DOMCache.notesModal) {
                DOMCache.notesModal.classList.add('hidden');
            }
        }

        function creerEvaluation() {
            Swal.fire({
                title: 'Créer une évaluation',
                html: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nom de l'évaluation</label>
                            <input type="text" class="input" placeholder="Ex: Contrôle de Mathématiques">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Date</label>
                            <input type="date" class="input" value="${new Date().toISOString().split('T')[0]}">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Coefficient</label>
                            <input type="number" class="input" value="1" min="0.5" max="3" step="0.5">
                        </div>
                    </div>
                `,
                showCancelButton: true,
                confirmButtonText: 'Créer',
                cancelButtonText: 'Annuler'
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        title: 'Évaluation créée',
                        text: 'La nouvelle évaluation a été créée avec succès',
                        icon: 'success',
                        timer: 2000,
                        showConfirmButton: false
                    });
                }
            });
        }

        // ====== GESTION DES ABSENCES ======
        function initializeAbsencesPage() {
            updateAbsencesStats();
            initializeAbsencesCharts();
            updateDatePointage();
        }

        function updateAbsencesStats() {
            // Simuler des données de démonstration
            document.getElementById('absencesAujourdhui').textContent = "5";
            document.getElementById('tauxPresence').textContent = "92%";
            document.getElementById('retardsAujourdhui').textContent = "8";
            document.getElementById('absencesNonJustifiees').textContent = "3";
        }

        function initializeAbsencesCharts() {
            // Graphique des retards
            const retardsCtx = document.getElementById('retardsChart');
            if (retardsCtx) {
                new Chart(retardsCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['0-5 min', '6-10 min', '11-15 min', '+15 min'],
                        datasets: [{
                            data: [25, 40, 20, 15],
                            backgroundColor: [
                                '#10b981',
                                '#3b82f6',
                                '#f59e0b',
                                '#ef4444'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
        }

        function updateDatePointage() {
            const dateElement = document.getElementById('datePointage');
            if (dateElement) {
                const today = new Date();
                dateElement.textContent = today.toLocaleDateString('fr-FR', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            }
        }

        function switchTabAbsences(tabName) {
            // Mettre à jour les boutons d'onglets
            document.querySelectorAll('.tab-btn-absences').forEach(btn => {
                btn.classList.remove('border-blue-500', 'text-blue-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Activer le bouton sélectionné
            const activeBtn = document.querySelector(`[data-tab="${tabName}"]`);
            activeBtn.classList.add('border-blue-500', 'text-blue-600');
            activeBtn.classList.remove('border-transparent', 'text-gray-500');
            
            // Afficher le contenu de l'onglet sélectionné
            document.querySelectorAll('.tab-content-absences').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.getElementById(`tab-${tabName}`).classList.remove('hidden');
        }

        function openAbsenceModal() {
            const modal = DOMCache.absenceModal;
            if (!modal) return;
            
            // Peupler le sélecteur d'élèves
            const eleveSelect = document.getElementById('eleveAbsenceSelect');
            if (eleveSelect) {
                eleveSelect.innerHTML = '<option value="">Sélectionner un élève</option>' +
                    appState.eleves.map(e => `<option value="${e.id}">${e.prenom} ${e.nom} - ${e.classe}</option>`).join('');
            }
            
            modal.classList.remove('hidden');
        }

        function closeAbsenceModal() {
            if (DOMCache.absenceModal) {
                DOMCache.absenceModal.classList.add('hidden');
            }
        }

        function saveAbsence() {
            if (!DOMCache.absenceForm) return;
            
            const eleveId = document.getElementById('eleveAbsenceSelect').value;
            const type = document.getElementById('typeAbsenceSelect').value;
            const motif = document.getElementById('motifAbsence').value;
            
            if (!eleveId) {
                showError('Veuillez sélectionner un élève');
                return;
            }
            
            // Trouver l'élève
            const eleve = appState.eleves.find(e => e.id === parseInt(eleveId));
            
            // Enregistrer l'absence (simulé)
            Swal.fire({
                title: 'Absence enregistrée',
                text: `L'absence a été enregistrée pour ${eleve.prenom} ${eleve.nom}`,
                icon: 'success',
                timer: 2000,
                showConfirmButton: false
            });
            
            closeAbsenceModal();
            DOMCache.absenceForm.reset();
        }

        function pointerPresence() {
            Swal.fire({
                title: 'Pointer une présence',
                text: 'Cette fonctionnalité sera disponible dans la prochaine version',
                icon: 'info',
                confirmButtonText: 'Compris'
            });
        }

        // ====== GESTION DE L'EMPLOI DU TEMPS ======
        function initializeEDTPage() {
            updateEDTStats();
            initializeEDTData();
        }

        function updateEDTStats() {
            // Simuler des données de démonstration
            document.getElementById('coursAujourdhui').textContent = "14";
            document.getElementById('classesActiveEDT').textContent = "8";
            document.getElementById('heuresEnseignees').textContent = "240";
        }

        function initializeEDTData() {
            // Peupler les sélecteurs
            const classeEDTSelect = document.getElementById('classeEDTSelect');
            const enseignantEDTSelect = document.getElementById('enseignantEDTSelect');
            
            if (classeEDTSelect) {
                classeEDTSelect.innerHTML = '<option value="">Choisir une classe</option>' +
                    appState.classes.map(c => `<option value="${c.id}">${c.nom}</option>`).join('');
            }
            
            if (enseignantEDTSelect) {
                enseignantEDTSelect.innerHTML = '<option value="">Choisir un enseignant</option>' +
                    appState.enseignants.map(e => `<option value="${e.id}">${e.prenom} ${e.nom}</option>`).join('');
            }
        }

        function switchTabEDT(tabName) {
            // Mettre à jour les boutons d'onglets
            document.querySelectorAll('.tab-btn-edt').forEach(btn => {
                btn.classList.remove('border-blue-500', 'text-blue-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Activer le bouton sélectionné
            const activeBtn = document.querySelector(`[data-tab="${tabName}"]`);
            activeBtn.classList.add('border-blue-500', 'text-blue-600');
            activeBtn.classList.remove('border-transparent', 'text-gray-500');
            
            // Afficher le contenu de l'onglet sélectionné
            document.querySelectorAll('.tab-content-edt').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.getElementById(`tab-${tabName}`).classList.remove('hidden');
        }

        function genererEDT() {
            Swal.fire({
                title: 'Générer un emploi du temps',
                text: 'Cette fonctionnalité sera disponible dans la prochaine version',
                icon: 'info',
                confirmButtonText: 'Compris'
            });
        }

        function ajouterCours() {
            showPage('emploi-du-temps');
            setTimeout(() => {
                switchTabEDT('planification');
            }, 100);
        }

        // ====== GESTION FINANCIÈRE ======
        function initializeFinancesPage() {
            updateFinancesStats();
            initializeFinancesCharts();
        }

        function updateFinancesStats() {
            // Simuler des données de démonstration
            document.getElementById('recettesMois').textContent = "2.450.000 FCFA";
            document.getElementById('depensesMois').textContent = "1.850.000 FCFA";
            document.getElementById('soldeActuel').textContent = "600.000 FCFA";
            document.getElementById('fraisImpayes').textContent = "450.000 FCFA";
        }

        function initializeFinancesCharts() {
            // Graphique d'évolution financière
            const evolutionCtx = document.getElementById('evolutionFinanciereChart');
            if (evolutionCtx) {
                new Chart(evolutionCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Jun', 'Jul', 'Aoû', 'Sep', 'Oct', 'Nov', 'Déc'],
                        datasets: [
                            {
                                label: 'Recettes',
                                data: [1800000, 2100000, 1900000, 2200000, 2400000, 2300000, 2500000, 2450000, 2600000, 2550000, 2700000, 2800000],
                                borderColor: '#10b981',
                                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: 'Dépenses',
                                data: [1500000, 1700000, 1600000, 1800000, 1900000, 1850000, 2000000, 1950000, 2100000, 2050000, 2200000, 2150000],
                                borderColor: '#ef4444',
                                backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                tension: 0.4,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return (value / 1000000).toFixed(1) + 'M';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Graphique de répartition des dépenses
            const repartitionCtx = document.getElementById('repartitionDepensesChart');
            if (repartitionCtx) {
                new Chart(repartitionCtx, {
                    type: 'pie',
                    data: {
                        labels: ['Salaire personnel', 'Matériel scolaire', 'Maintenance', 'Frais divers'],
                        datasets: [{
                            data: [60, 20, 10, 10],
                            backgroundColor: [
                                '#3b82f6',
                                '#10b981',
                                '#f59e0b',
                                '#8b5cf6'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
        }

        function switchTabFinances(tabName) {
            // Mettre à jour les boutons d'onglets
            document.querySelectorAll('.tab-btn-finances').forEach(btn => {
                btn.classList.remove('border-blue-500', 'text-blue-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Activer le bouton sélectionné
            const activeBtn = document.querySelector(`[data-tab="${tabName}"]`);
            activeBtn.classList.add('border-blue-500', 'text-blue-600');
            activeBtn.classList.remove('border-transparent', 'text-gray-500');
            
            // Afficher le contenu de l'onglet sélectionné
            document.querySelectorAll('.tab-content-finances').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.getElementById(`tab-${tabName}`).classList.remove('hidden');
        }

        function nouvelleRecette() {
            Swal.fire({
                title: 'Nouvelle recette',
                text: 'Cette fonctionnalité sera disponible dans la prochaine version',
                icon: 'info',
                confirmButtonText: 'Compris'
            });
        }

        function nouvelleDepense() {
            Swal.fire({
                title: 'Nouvelle dépense',
                text: 'Cette fonctionnalité sera disponible dans la prochaine version',
                icon: 'info',
                confirmButtonText: 'Compris'
            });
        }

        // ====== GESTION DES PARAMÈTRES ======
        function initializeParametresPage() {
            // Initialisation des paramètres
        }

        function switchTabParametres(tabName) {
            // Mettre à jour les boutons d'onglets
            document.querySelectorAll('.tab-btn-parametres').forEach(btn => {
                btn.classList.remove('border-blue-500', 'text-blue-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Activer le bouton sélectionné
            const activeBtn = document.querySelector(`[data-tab="${tabName}"]`);
            activeBtn.classList.add('border-blue-500', 'text-blue-600');
            activeBtn.classList.remove('border-transparent', 'text-gray-500');
            
            // Afficher le contenu de l'onglet sélectionné
            document.querySelectorAll('.tab-content-parametres').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.getElementById(`tab-${tabName}`).classList.remove('hidden');
        }

        function sauvegarderMaintenant() {
            Swal.fire({
                title: 'Sauvegarde en cours',
                text: 'Les données sont en cours de sauvegarde...',
                icon: 'info',
                timer: 2000,
                showConfirmButton: false
            }).then(() => {
                Swal.fire({
                    title: 'Sauvegarde terminée',
                    text: 'Toutes les données ont été sauvegardées avec succès',
                    icon: 'success',
                    timer: 2000,
                    showConfirmButton: false
                });
            });
        }

        // ====== GESTION DES NOTIFICATIONS ======
        function initializeNotifications() {
            renderNotificationsList();
        }

        function renderNotificationsList() {
            const notificationsList = DOMCache.notificationsList;
            if (!notificationsList) return;
            
            if (!appState.notifications || appState.notifications.length === 0) {
                notificationsList.innerHTML = `
                    <li class="p-4 text-center text-gray-500">
                        <i class="fas fa-bell-slash text-2xl mb-2"></i>
                        <div>Aucune notification</div>
                    </li>
                `;
                return;
            }
            
            notificationsList.innerHTML = appState.notifications.map(notification => `
                <li class="p-4 border-b border-gray-200/50 last:border-0 ${!notification.lu ? 'bg-blue-50/50' : ''}">
                    <div class="flex items-start gap-3">
                        <div class="w-8 h-8 rounded-full ${notification.type === 'info' ? 'bg-blue-100 text-blue-600' : notification.type === 'warning' ? 'bg-amber-100 text-amber-600' : 'bg-green-100 text-green-600'} flex items-center justify-center flex-shrink-0 mt-1">
                            <i class="fas fa-${notification.type === 'info' ? 'info' : notification.type === 'warning' ? 'exclamation-triangle' : 'check'} text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <div class="text-sm ${!notification.lu ? 'font-medium text-gray-900' : 'text-gray-700'}">${notification.message}</div>
                            <div class="text-xs text-gray-500 mt-1">${notification.date}</div>
                        </div>
                        ${!notification.lu ? '<div class="w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-2"></div>' : ''}
                    </div>
                </li>
            `).join('');
        }

        function markAllNotificationsAsRead() {
            if (appState.notifications) {
                appState.notifications.forEach(notification => {
                    notification.lu = true;
                });
            }
            renderNotificationsList();
            
            // Mettre à jour l'indicateur de notification
            const notificationDot = document.querySelector('.notification-dot');
            if (notificationDot) {
                notificationDot.style.display = 'none';
            }
        }

        // ====== FONCTIONNALITÉS GÉNÉRALES ======
        function showPage(page) {
            if (!page) return;
            
            // Animation de transition entre pages
            const currentPage = document.querySelector('.page:not(.hidden)');
            const newPage = document.getElementById(`page-${page}`);
            
            if (!newPage) {
                console.warn(`Page non trouvée: page-${page}`);
                return;
            }
            
            if (currentPage && currentPage !== newPage) {
                currentPage.style.animation = 'slideOut 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)';
                setTimeout(() => {
                    currentPage.classList.add('hidden');
                    currentPage.style.animation = '';
                    displayNewPage(newPage, page);
                }, 400);
            } else {
                // Pas de page actuelle, afficher directement
                displayNewPage(newPage, page);
            }
        }
        
        function displayNewPage(newPage, page) {
            // Afficher la nouvelle page
            newPage.classList.remove('hidden');
            newPage.style.animation = 'slideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)';
            
            // Mettre à jour la navigation
            updateNavigation(page);
            updatePageTitle(page);
            
            // Fermer le menu mobile
            if (DOMCache.mobileMenu) {
                DOMCache.mobileMenu.classList.remove('open');
            }
            
            // Mettre à jour l'état
            appState.currentPage = page;
            
            // Initialiser la page si nécessaire
            switch(page) {
                case 'classes':
                    initializeClassesPage();
                    break;
                case 'eleves':
                    initializeElevesPage();
                    break;
                case 'enseignants':
                    initializeEnseignantsPage();
                    break;
                case 'dashboard':
                    initializeDashboard();
                    break;
                case 'notes':
                    initializeNotesPage();
                    break;
                case 'absences':
                    initializeAbsencesPage();
                    break;
                case 'emploi-du-temps':
                    initializeEDTPage();
                    break;
                case 'finances':
                    initializeFinancesPage();
                    break;
                case 'parametres':
                    initializeParametresPage();
                    break;
            }
        }

        function updateNavigation(page) {
            // Mettre à jour les éléments de navigation actifs
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-page') === page) {
                    item.classList.add('active');
                }
            });
        }

        function updatePageTitle(page) {
            const pageTitle = document.getElementById('pageTitle');
            const pageSubtitle = document.getElementById('pageSubtitle');
            
            if (!pageTitle || !pageSubtitle) return;
            
            const titles = {
                dashboard: "Tableau de bord",
                eleves: "Gestion des élèves",
                enseignants: "Gestion des enseignants",
                classes: "Classes & Matières",
                notes: "Notes & Évaluations",
                absences: "Gestion des absences",
                "emploi-du-temps": "Emploi du temps",
                messagerie: "Messagerie",
                finances: "Gestion financière",
                parametres: "Paramètres"
            };
            
            const subtitles = {
                dashboard: "Aperçu général du système",
                eleves: "Gérez les inscriptions et dossiers des élèves",
                enseignants: "Gérez le personnel enseignant",
                classes: "Organisez les classes et matières",
                notes: "Saisissez et consultez les notes",
                absences: "Suivez les présences et absences",
                "emploi-du-temps": "Planifiez les horaires de cours",
                messagerie: "Communiquez avec le personnel et les parents",
                finances: "Gérez les frais scolaires et budgets",
                parametres: "Configurez le système"
            };
            
            pageTitle.textContent = titles[page] || page;
            pageSubtitle.innerHTML = `
                <span>${subtitles[page] || 'Gestion scolaire complète'}</span>
                <span class="mx-2">•</span>
                <span class="flex items-center text-green-600">
                    <i class="fas fa-circle text-xs mr-1"></i>
                    Système opérationnel
                </span>
            `;
        }

        function performGlobalSearch(query) {
            if (!query || query.length < 2) {
                // Réinitialiser l'affichage si la requête est trop courte
                if (appState.currentPage === 'eleves') {
                    renderElevesTable();
                } else if (appState.currentPage === 'classes') {
                    renderClassesTable();
                    renderMatieresTable();
                } else if (appState.currentPage === 'enseignants') {
                    renderEnseignantsTable();
                }
                return;
            }
            
            const searchTerm = query.toLowerCase();
            
            if (appState.currentPage === 'eleves' && appState.eleves) {
                const filteredEleves = appState.eleves.filter(eleve => 
                    (eleve.nom && eleve.nom.toLowerCase().includes(searchTerm)) ||
                    (eleve.prenom && eleve.prenom.toLowerCase().includes(searchTerm)) ||
                    (eleve.matricule && eleve.matricule.toLowerCase().includes(searchTerm)) ||
                    (eleve.classe && eleve.classe.toLowerCase().includes(searchTerm))
                );
                
                renderElevesTable(filteredEleves);
            } else if (appState.currentPage === 'classes') {
                if (appState.classes) {
                    const filteredClasses = appState.classes.filter(classe => 
                        (classe.nom && classe.nom.toLowerCase().includes(searchTerm)) ||
                        (classe.niveau && classe.niveau.toLowerCase().includes(searchTerm)) ||
                        (classe.professeurPrincipal && classe.professeurPrincipal.toLowerCase().includes(searchTerm))
                    );
                    renderClassesTable(filteredClasses);
                }
                
                if (appState.matieres) {
                    const filteredMatieres = appState.matieres.filter(matiere => 
                        (matiere.nom && matiere.nom.toLowerCase().includes(searchTerm)) ||
                        (matiere.code && matiere.code.toLowerCase().includes(searchTerm))
                    );
                    renderMatieresTable(filteredMatieres);
                }
            } else if (appState.currentPage === 'enseignants' && appState.enseignants) {
                const filteredEnseignants = appState.enseignants.filter(enseignant => 
                    (enseignant.nom && enseignant.nom.toLowerCase().includes(searchTerm)) ||
                    (enseignant.prenom && enseignant.prenom.toLowerCase().includes(searchTerm)) ||
                    (enseignant.specialite && enseignant.specialite.toLowerCase().includes(searchTerm))
                );
                
                renderEnseignantsTable(filteredEnseignants);
            }
        }
    </script>
</body>
</html>
